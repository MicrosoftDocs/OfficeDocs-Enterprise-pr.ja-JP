---
title: アクセス可能な図 - SharePoint 2013 のための Microsoft Azure のインターネット サイト
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
ms.date: 12/15/2017
audience: ITPro
ms.topic: article
ms.collection: Ent_O365
ms.service: o365-solutions
localization_priority: Normal
ms.assetid: 71636974-fb99-487c-ac67-f15e9401acba
description: この資料は、「SharePoint Server 2013 を使用した Microsoft Azure のインターネット サイト」という名前の図のアクセス可能なテキスト バージョンです。
ms.openlocfilehash: cf978dfb95b1f201c342889fc3dda428bb618241
ms.sourcegitcommit: 35c04a3d76cbe851110553e5930557248e8d4d89
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/07/2019
ms.locfileid: "38028061"
---
# <a name="accessible-diagram---internet-sites-in-microsoft-azure-for-sharepoint-2013"></a>アクセス可能な図 - SharePoint 2013 のための Microsoft Azure のインターネット サイト

**概要:** この資料は、「SharePoint Server 2013 を使用した Microsoft Azure のインターネット サイト」という名前の図のアクセス可能なテキスト バージョンです。
  
このポスターは、一般向けインターネット サイトがクラウドの弾力性と顧客アカウント用の Microsoft Azure AD を活用することで得られるメリットについて説明し、図解しています。Azure からインターネット サイトが得られるメリットを説明する 6 つの異なるシナリオがあります。 
  
- ファーム トポロジを設計およびサイズ調整します。 
    
- Azure を微調整します。 
    
- Active Directory モデルを選択します。 
    
- ID 管理、ゾーン、認証を設計します。 
    
- クロスサイト発行のためのサイトと URL を設計します。 
    
- Azure 環境を設計します。 
    
## <a name="design-and-size-the-farm-topology"></a>ファーム トポロジを設計およびサイズ調整する

TechNet で SharePoint 2013 のトポロジ、キャパシティ、パフォーマンスのガイダンスを参照して、ファームのトポロジを設計します。 
  
設計するファームがキャパシティとパフォーマンスの目標を満たすようにします。 
  
### <a name="example-medium-internet-sites-farm-85-page-views-per-second"></a>例:中規模のインターネット サイト ファーム (1 秒間に最大 85 ページ表示可能)

このファームは、フォールト トレランスを備えた SharePoint 2013 検索ファーム トポロジを提供します。これは、3,400,000 個のアイテムを含むコーパスに最適化されています。 
  
この例におけるファームは、言語に応じて 1 秒間に 100 ～ 200 個のドキュメントを処理します。さらに、1 秒間に 85 のページ ビューと 100 個のクエリに対応できます。 
  
付属図は 3 種類のサーバーのあるインターネット サイト ファームを示しています。 
  
- Web サーバー 
    
- アプリケーション サーバー 
    
- データベース サーバー 
    
#### <a name="web-servers"></a>Web サーバー

[Web サーバー] セクションには、ホスト A、ホスト B、ホスト C の 3 台の Web サーバーがあります。各 Web サーバーには、分散キャッシュ、ユーザー プロファイル、管理されたメタデータ、およびクエリ処理機能が含まれます。各サーバーには、インデックス パーティションのレプリカも含まれます。 
  
スケール アウトのために、同じ機能を持つ Web サーバーを追加することにより、1 秒間に表示可能なページが 28 ページ増加します。 
  
#### <a name="application-servers"></a>アプリケーション サーバー

[アプリケーション サーバー] セクションには、ホスト D、ホスト E、ホスト F の 3 つのアプリケーション サーバーがあります。ホスト D には、クロール、管理、分析、コンテンツ処理コンポーネントが含まれます。ホスト E には、クロール、管理、およびコンテンツ処理コンポーネントが含まれます。ホスト F には、クロールおよびコンテンツ処理コンポーネントが含まれます。 
  
スケール アウトのために、クロール コンポーネントおよびコンテンツ処理コンポーネントを備えたアプリケーション サーバーを 1 台追加することにより、1 秒間に処理可能なドキュメントが 40 個増加します。 
  
#### <a name="database-servers"></a>データベース サーバー

[データベース サーバー] セクションには、ホスト G とホスト H の 2 つのサーバーがあります。データベース サーバーは、フォールト トレランス用のペアのホストです。 
  
ホスト G には、すべての SharePoint データベースがあります。それには、検索管理データベース、リンク データベース、2 つのクロール データベース、分析データベース、および他のすべての SharePoint データベースが含まれます。ホスト H には、すべての SharePoint データベースがあります。それには、SQL クラスタリング、ミラーリング、または SQL Server 2012 AlwaysOn を使用したすべてのデータベースの冗長コピーが含まれます。 
  
## <a name="fine-tune-for-azure"></a>Azure を微調整する

SharePoint ファームを Azure プラットフォームで可用性セットのために微調整しなければならない場合があります。すべてのコンポーネントで高可用性を確保するには、サーバー ロールがすべて同じ構成になっていることを確認してください。 
  
トポロジの例の図: 
  
- Web サーバーとデータベース サーバーが同一の構成です。 
    
- 3 つのアプリケーション サーバーの構成は同一ではありません。これらのサーバー ロールに関しては、Azure で可用性セット用に微調整が必要です。 
    
### <a name="before"></a>Before

図の上部は、Azure で可用性セット用に微調整される前の SharePoint ファームを示しています。図の 3 つのホスト アプリケーション サーバーは同一の構成ではありません。コンポーネントの数は、ファームのパフォーマンスとパフォーマンスの目標によって決定されます。3 台のサーバーが次のように構成されています。 
  
- ホスト D アプリケーション サーバーは、クロール、管理、分析、およびコンテンツ処理の役割で構成されます。 
    
- ホスト E アプリケーション サーバーは、クロール、管理、およびコンテンツ処理の役割で構成されます。 
    
- ホスト F アプリケーション サーバーは、クロールおよびコンテンツ処理の役割で構成されます。 
    
### <a name="after"></a>After

図のこの部分は、Azure で可用性セット用に微調整された後の SharePoint ファームを示しています。Azure でこのアーキテクチャを採用するには、3 つすべてのサーバーで 4 つのコンポーネントのレプリカを作成します。これにより、パフォーマンスとキャパシティに関して必要とされる以上にコンポーネント数が増えます。これは、これら 3 つの仮想マシンが 1 つの可用性セットに割り当てられる場合に、この設計で Azure プラットフォームの 4 つすべてのコンポーネントの高可用性を確保するためのトレードオフとなります。 
  
3 つのすべてのサーバーが、クロール、管理、分析、およびコンテンツ処理の役割を持つよう構成されます。 
  
## <a name="choose-the-active-directory-model"></a>Active Directory モデルを選択する

すべての SharePoint ソリューションに Windows Active Directory ドメイン サービス (AD DS) が必要です。現在、Azure の SharePoint ソリューションには次の 2 つの選択肢があります。 
  
- オプション 1: 専用ドメイン  Azure に対して専用で独立したドメインを展開し、SharePoint ファームをサポートできます。一般のインターネット サイトに適しています。 
    
- オプション 2: サイト間 VPN 接続を使用してオンプレミス ドメインを拡張します。サイト間 VPN 接続を介してオンプレミス ドメインを拡張すると、ユーザーはオンプレミスでホストされている場合と同じように SharePoint ファームにアクセスできます。既存の Active Directory および DNS の実装を活用できます。 
    
## <a name="design-for-identity-management-zones-and-authentication"></a>ID 管理、ゾーン、認証を設計する

### <a name="design-for-accounts-and-authentication"></a>アカウントと認証を設計する

アカウントを管理する方法と、使用する認証の種類を決定します。 
  
#### <a name="accounts-for-site-developers-and-authors"></a>サイトの開発者と作成者のアカウント

- Azure のドメインにアカウントを追加します。 
    
- オンプレミスで Active Directory フェデレーション サービス (AD FS) を使用して、Azure 内のドメインに内部アカウントのフェデレーションを行います。 
    
- サイト ツー サイト VPN 接続を設計する場合は、内部アカウントを使用します。 
    
#### <a name="accounts-for-customers"></a>お客様のアカウント

- Azure Active Directory を使用します。 
    
- 別の SAML ベースのプロバイダーを使用します。 
    
### <a name="design-for-zones"></a>ゾーンの設計

SharePoint 2013 では、ID 管理はゾーン構成と認証に分けられています。 
  
この設計は、顧客アカウントとそれ以外のアカウントを明確に分離します。 
  
- この設計は、顧客アカウントを作成者やサイト開発者用の内部アカウントから完全に分離する場合に使用します。 
    
- この設計を使用することで、Web アプリケーション内の顧客のアクションを制限するのにゾーンのポリシーを使用できます。 
    
- このデザインでは、顧客アカウントと内部アカウントは別の URL になります。 
    
この例では次のようになっています。 
  
- 内部アカウント用の既定のゾーンを構成します。 
    
- 顧客の認証済みアクセスのためのエクストラネット ゾーンを構成します。Azure Active Directory (AD) を顧客アカウントに使用するか、別の SAML ベースのプロバイダーを使用します。 
    
- 匿名アクセスのためのインターネット ゾーンを構成します。 
    
すべての認証済みユーザーが既定のゾーンを使用するように構成する 2 ゾーンの設計は使用しないでください。 
  
付属図に、内部アカウントと顧客アカウントが分離された 3 ゾーン設計を示します。 
  
訪問者および顧客は、2 つのゾーンの 1 つにある Web アプリケーションから SharePoint 2013 ファームのAzure AD テナントにアクセスします。2 つのゾーンは次のとおりです。 
  
- ゾーン:匿名ユーザーのためのインターネット 
    
- ゾーン:認証されたユーザーのためのエクストラネット 
    
内部アカウントを持つユーザーは、VPN トンネルから Azure AD を経由して、オンプレミス環境の AD DS および AD FS から Azure Active Directory テナントにアクセスします。既定のゾーンは、Windows 認証 (NTLM) を提供します。 
  
### <a name="design-for-connecting-to-azure-ad"></a>Azure AD に接続するために設計する

 Azure AD は、クラウド サービスに ID 管理機能とアクセス制御機能を提供します。クラウド ベースのディレクトリ データ ストアや ID サービスのコア セット (ユーザー ログオン プロセス、認証サービス、AD FS) の機能があります。Azure AD に含まれる ID サービスは、オンプレミス Azure AD の展開と簡単に統合でき、サード パーティの ID プロバイダーを十分にサポートしています。
  
付属の図は、次のシナリオを示しています。 
  
SharePoint 2013 と Azure Active Directory を統合する場合、Azure アクセス制御サービス (ACS) は 2 つの目的を果たします。 
  
-  Azure AD は SAML 2.0 を使用し、SharePoint は SAML 1.1 でのみ動作します。ACS は両方の形式を理解し、SharePoint と Azure AD のトークン形式を変換する中間コンポーネントとして機能します。
    
- ACS によって、この SAML シナリオでは ID プロバイダー セキュリティ トークン サービス (IP-STS) が不要になります。 
    
詳細については、TechNet ライブラリの SharePoint 2013 での Azure AD の構成に関する記事を参照してください。 
  
## <a name="design-sites-and-urls-for-cross-site-publishing"></a>クロスサイト発行のためのサイトと URL を設計する

発行のためのシナリオでは、1 つの Web アプリケーションの設計をお勧めします。 
  
- オーサリング サイトと公開サイトの両方が、同じ Web アプリケーションにあります。 
    
- クロスサイト発行は資産を公開する場合に使用されます。 
    
パス ベースでホスト名が付いたサイト コレクションを使用します。 
  
- ルート サイト コレクションが必要です。パス ベースのサイトとしてこのサイトを作成します。 
    
- その他すべてのサイト コレクションをホスト名付きサイト コレクションとして作成します。 
    
Web アプリケーションとルート サイトの URL 
  
- Web アプリケーションの URL には内部名を使用します。別の名前を指定しない場合、SharePoint では既定の名前としてローカル コンピューター名が使用されます。内部ネットワーク環境用に予約されているドメイン名を使用できます。 
    
- SharePoint では、Web アプリケーションの作成時に標準以外のポート番号が割り当てられます。ポート 80 やポート 443 の代わりに、このポート番号を使用します。または別の、標準以外のポート番号を使用します。 
    
- パス ベースのサイト コレクションであるルート サイト コレクションに、同じ名前とポート番号を使用します。 
    
Web アプリケーションを使用してサイト コレクションとやり取りする検索などのアプリケーション プールサービスを付属図に示します。図のサイト コレクションは次のとおりです。 
  
- https://internal:8000 (ルート サイト) にあるパスベースのサイト コレクション。 
    
- クロール:https://authoring.contoso.com:8000 などのアドレスにある、ホスト名が付いたサイト コレクション。 
    
- クエリ:以下のようなアドレスにある、2 つの別々のホスト名が付いたサイト コレクション。 
    
  - https://www.contoso.com 
    
  - https://secure.contoso.com 
    
  - https://www.contoso.com:8000 
    
  - https://assets.contoso.com 
    
  - https://secureassets.contoso.com 
    
  - https://assets.contoso.com:8000 
    
## <a name="design-the-azure-environment"></a>Azure 環境を設計する

この例のアーキテクチャには次の要素が含まれます。 
  
- サイト間 VPN 接続はオプションであり、オンプレミス Windows AD DS と DNS の環境を Azure の仮想ネットワークに拡張します。 
    
- 必要に応じて、SharePoint ファームをサポートするために Azure で専用のドメインを使用します。 
    
- サーバーは、Azure クラウド サービス間で役割に基づいて分割されます。 
    
- 可用性設定により、同一に構成されたサーバーの役割で高可用性が確保されます。 
    
詳細については、TechNet の以下の記事を参照してください。「SharePoint 2013 用の Microsoft Azure アーキテクチャ」。 
  
付属の図は、Azure の仮想ネットワークに接続するオンプレミス環境の例を示します。 
  
オンプレミス環境には、Azure 環境のオプションの要素である次のコンポーネントが含まれています。 
  
- Windows Server 2012 RRAS  
    
- AD DS 
    
- Windows サーバーおよび AD DS からアクティブな VPN ゲートウェイのサブネットへの VPN ゲートウェイ 
    
Azure の仮想ネットワーク環境には、次のコンポーネントが含まれています。 
  
- アクティブな VPN ゲートウェイのサブネット (該当する場合、オンプレミス環境と重複) 
    
- AD DS および DNS の可用性セットが含まれているクラウド サービス (2 台のサーバー) 
    
- フロント エンド サーバーの可用性セットを含む (3 台の SharePoint サーバー) クラウド サービスとアプリケーション サーバーの可用性セット (3 台の SharePoint サーバー) 
    
- 2 台のデータベースの可用性セットを含むクラウド サービス 
    

