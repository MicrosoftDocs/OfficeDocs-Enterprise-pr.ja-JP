---
title: ベースラインとパフォーマンス履歴を使用して、Office 365 のパフォーマンスをチューニングする
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 8/31/2017
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 1492cb94-bd62-43e6-b8d0-2a61ed88ebae
ms.collection:
- M365-security-compliance
- Ent_O365
- SPO_Content
description: Office 365 と企業間の接続のパフォーマンスを確認する簡単な方法がいくつかあります。これにより、接続の大まかなベースラインを確立することができます。 クライアントコンピューター接続のパフォーマンス履歴を把握しておくと、問題を早期に発見し、問題を特定して予測するのに役立ちます。
ms.openlocfilehash: ffccd9f5763d7d47dbb3aa02d3063582d1fa83cc
ms.sourcegitcommit: 4c519f054216c05c42acba5ac460fb9a821d6436
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/17/2020
ms.locfileid: "44774552"
---
# <a name="office-365-performance-tuning-using-baselines-and-performance-history"></a><span data-ttu-id="a93a7-104">ベースラインとパフォーマンス履歴を使用して、Office 365 のパフォーマンスをチューニングする</span><span class="sxs-lookup"><span data-stu-id="a93a7-104">Office 365 performance tuning using baselines and performance history</span></span>

<span data-ttu-id="a93a7-105">Office 365 と企業間の接続のパフォーマンスを確認する簡単な方法がいくつかあります。これにより、接続の大まかなベースラインを確立することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-105">There are some simple ways to check the connection performance between Office 365 and your business that will let you establish a rough baseline of your connectivity.</span></span> <span data-ttu-id="a93a7-106">クライアントコンピューター接続のパフォーマンス履歴を把握しておくと、問題を早期に発見し、問題を特定して予測するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-106">Knowing the performance history of your client computer connections can help you detect emerging issues early, identify, and predict problems.</span></span>
  
<span data-ttu-id="a93a7-107">パフォーマンスの問題に対処するために使用しない場合は、この記事でよく寄せられる質問のうち、Office 365 サービスインシデントではなくパフォーマンス上の問題が発生していることをどのように確認できるかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-107">If you're not used to working on performance issues, this article is designed to help you consider some common questions, like How do you know the problem you're seeing is a performance issue and not an Office 365 service incident?</span></span> <span data-ttu-id="a93a7-108">良好なパフォーマンスと長期的な計画をするにはどうすればよいですか?</span><span class="sxs-lookup"><span data-stu-id="a93a7-108">How can you plan for good performance, long term?</span></span> <span data-ttu-id="a93a7-109">パフォーマンスを常に把握するには、どうすればよいですか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-109">How can you keep an eye on performance?</span></span> <span data-ttu-id="a93a7-110">Office 365 を使用しているときに、チームまたはクライアントでパフォーマンスが低下している場合は、次の点を確認してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-110">If your team or clients are seeing slow performance while using Office 365, and you wonder about any of these questions, read on.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="a93a7-111">**現在、クライアントと Office 365 の間のパフォーマンスの問題がありますか?**</span><span class="sxs-lookup"><span data-stu-id="a93a7-111">**Have a performance issue between your client and Office 365 right now?**</span></span> <span data-ttu-id="a93a7-112">「 [Office 365 のパフォーマンストラブルシューティング計画](performance-troubleshooting-plan.md)」に記載されている手順に従います。</span><span class="sxs-lookup"><span data-stu-id="a93a7-112">Follow the steps outlined in the [Performance troubleshooting plan for Office 365](performance-troubleshooting-plan.md).</span></span> 
    
## <a name="something-you-should-know-about-office-365-performance"></a><span data-ttu-id="a93a7-113">Office 365 のパフォーマンスについて理解しておくべきこと</span><span class="sxs-lookup"><span data-stu-id="a93a7-113">Something you should know about Office 365 performance</span></span>

<span data-ttu-id="a93a7-114">Office 365 は、自動化だけでなく、実際のユーザーによって常時監視されている大容量の専用 Microsoft ネットワーク内に存在します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-114">Office 365 lives inside a high-capacity, dedicated Microsoft network that is steadily monitored not just by automation, but by real people.</span></span> <span data-ttu-id="a93a7-115">Office 365 cloud のメンテナンスの役割の一部は、使用可能なパフォーマンスのチューニングと合理化を実現することです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-115">Part of the role of maintaining the Office 365 cloud is building-in performance tuning and streamlining where it's possible.</span></span> <span data-ttu-id="a93a7-116">Office 365 クラウドのクライアントはインターネットを介して接続する必要があるため、Office 365 サービス全体でパフォーマンスを微調整するための継続的な取り組みがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-116">Since clients of the Office 365 cloud have to connect across the Internet, there is a continuous effort to fine-tune the performance across Office 365 services too.</span></span> <span data-ttu-id="a93a7-117">パフォーマンスの向上は、クラウドでは実際には停止しません。クラウドの正常性と迅速な維持には、多くの累積的な実績があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-117">Performance improvements never really stop in the cloud, and there is a lot of accumulated experience with keeping the cloud healthy and quick.</span></span> <span data-ttu-id="a93a7-118">お客様の場所から Office 365 に接続してパフォーマンス上の問題が発生した場合は、まず、サポートケースを開始し、サポートを受けることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-118">Should you experience a performance issue connecting from your location to Office 365, it's best not to start with, and wait on, a Support case.</span></span> <span data-ttu-id="a93a7-119">代わりに、「インサイド out」から問題の調査を開始する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-119">Instead, you should begin investigating the problem from 'the inside out'.</span></span> <span data-ttu-id="a93a7-120">つまり、ネットワークの内部から始めて、Office 365 に対処します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-120">That is, start inside of your network, and work your way out to Office 365.</span></span> <span data-ttu-id="a93a7-121">Office 365 サポートを使用してケースを開く前に、データを収集し、問題を調査して解決する可能性があるアクションを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-121">Before you open a case with Office 365 Support, you can gather data and take actions that will explore, and may resolve, your problem.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="a93a7-122">Office 365 の容量計画と制限事項に注意してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-122">Be aware of capacity planning and limits in Office 365.</span></span> <span data-ttu-id="a93a7-123">この情報は、パフォーマンスの問題を解決しようとするときに、曲線の前に置きます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-123">That information will put you ahead of the curve when trying to resolve a performance issue.</span></span> <span data-ttu-id="a93a7-124">ここでは、 [Microsoft 365 および Office 365 サービスの説明](https://docs.microsoft.com/office365/servicedescriptions/office-365-service-descriptions-technet-library)へのリンクを示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-124">Here's a link to the [Microsoft 365 and Office 365 service descriptions](https://docs.microsoft.com/office365/servicedescriptions/office-365-service-descriptions-technet-library).</span></span> <span data-ttu-id="a93a7-125">これは中央ハブで、Office 365 によって提供されるすべてのサービスには、ここからの独自のサービスの説明に行くリンクがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-125">This is a central hub, and all the services offered by Office 365 have a link that goes to their own Service Descriptions from here.</span></span> <span data-ttu-id="a93a7-126">つまり、sharepoint online の標準的な制限を確認する必要があるとします。たとえば、sharepoint online[サービスの説明](https://technet.microsoft.com/library/sharepoint-online-service-description.aspx)をクリックして、その sharepoint Online の[制限セクション](https://go.microsoft.com/fwlink/p/?LinkID=856113)を探します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-126">That means, should you need to see the standard limits for SharePoint Online, for example, you would click [SharePoint Online Service Description](https://technet.microsoft.com/library/sharepoint-online-service-description.aspx) and locate its [SharePoint Online Limits section](https://go.microsoft.com/fwlink/p/?LinkID=856113).</span></span> 
  
<span data-ttu-id="a93a7-127">パフォーマンスが変化していることを理解した上でトラブルシューティングを行ってください。これは、stressful の価値を実現し、永続的に保持することではありません (これがそうであれば、多くのユーザーが使用している場合や大規模なデータ移行を実行する場合など)、パフォーマンスへの影響を計画します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-127">Make sure you go into your troubleshooting with the understanding that performance is a sliding scale, it's not about achieving an idealized value and maintaining it permanently (if you believe this is so, then occasional high-bandwidth tasks like on-boarding a large number of users, or doing large data migrations will be very stressful -- so do plan for performance impacts then).</span></span> <span data-ttu-id="a93a7-128">パフォーマンス目標を大まかに理解しておくことができますが、多くの変数がパフォーマンスを向上させるため、パフォーマンスは異なります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-128">You can, and should, have a rough idea of your performance targets, but a lot of variables play into performance, therefore, performance varies.</span></span> <span data-ttu-id="a93a7-129">これはパフォーマンスの特性です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-129">That's the nature of performance.</span></span> 
  
<span data-ttu-id="a93a7-130">パフォーマンスのトラブルシューティングは、特定の目標を達成し、それらの番号を無期限に維持することではなく、すべての変数を指定して既存のアクティビティを改善することになります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-130">Performance troubleshooting isn't about meeting specific goals and maintaining those numbers indefinitely, it's about improving existing activities, given all the variables.</span></span> 
  
## <a name="okay-what-does-a-performance-problem-look-like"></a><span data-ttu-id="a93a7-131">パフォーマンスの問題がどのようなものかを確認します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-131">Okay, what does a performance problem look like?</span></span>

<span data-ttu-id="a93a7-132">最初に、発生していることがパフォーマンスの問題であり、サービスインシデントではないことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-132">First, you need to make sure that what you are experiencing is indeed a performance issue and not a service incident.</span></span> <span data-ttu-id="a93a7-133">パフォーマンスの問題は、Office 365 のサービスインシデントとは異なります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-133">A performance problem is different from a service incident in Office 365.</span></span> <span data-ttu-id="a93a7-134">それらを区別する方法は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-134">Here's how to tell them apart.</span></span>
  
<span data-ttu-id="a93a7-135">Office 365 サービスで問題が発生している場合は、サービスインシデントです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-135">If the Office 365 service is having issues, that's a service incident.</span></span> <span data-ttu-id="a93a7-136">Microsoft 365 管理センターの [現在の**稼働状態**] の下に赤色または黄色のアイコンが表示されます。また、Office 365 に接続しているクライアントコンピューターのパフォーマンスが低下することがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-136">You will see red or yellow icons under **Current health** in the Microsoft 365 admin center, you may also notice slow performance on client computers connecting to Office 365.</span></span> <span data-ttu-id="a93a7-137">たとえば、現在の正常性レポートに赤いアイコンが表示されていて、Exchange の近くを**調査**している場合は、exchange Online を使用しているクライアントメールボックスが正しく動作していないことを示す、組織内のユーザーからの一連の呼び出しを受け取ることがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-137">For example, if Current health reports a red icon and you see **Investigating** beside Exchange, you might then also receive a bunch of calls from people in your organization who complain that client mailboxes that use Exchange Online are performing badly.</span></span> <span data-ttu-id="a93a7-138">その場合は、Exchange Online のパフォーマンスがサービス内の問題の被害になることを想定することが適切です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-138">In that case, it's reasonable to assume that your Exchange Online performance just became a victim of issues within the Service.</span></span> 
  
![Office 365 Health dashboard。グリーンは、Exchange を除くすべてのワークロードを使用して、復元されたサービスを示します。](media/ec7f0325-9e61-4e1a-bec0-64b87f4469be.PNG)
  
<span data-ttu-id="a93a7-140">この時点で、Office 365 管理者は、**現在の状態**を確認してから、**詳細と履歴を表示**して、システム上で実行する最新のメンテナンスについてよく把握する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-140">At this point, you, the Office 365 admin, should check **Current health** and then **View details and history**, frequently, to keep up to date on maintenance we perform on the system.</span></span> <span data-ttu-id="a93a7-141">**現在の正常性**ダッシュボードにより、サービスに対する変更と問題の解決についての更新が行われました。</span><span class="sxs-lookup"><span data-stu-id="a93a7-141">The **Current health** dashboard was made to update you about changes to, and problems in, the service.</span></span> <span data-ttu-id="a93a7-142">「Health history, admin to admin」に記載されているメモと説明は、影響を評価し、継続的な作業についての投稿を維持するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-142">The notes and explanations written to health history, admin to admin, are there to help you gauge your impact, and to keep you posted about ongoing work.</span></span> 
  
![Exchange Online サービスが復元されたことと、その理由を説明する Office 365 正常性ダッシュボードの画像。](media/66609554-426a-4448-8be6-ea09817f41ba.PNG)
  
<span data-ttu-id="a93a7-144">パフォーマンスの問題は、インシデントがパフォーマンスを低下する可能性がある場合でも、サービスインシデントではありません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-144">A performance issue isn't a service incident, even though incidents can cause slow performance.</span></span> <span data-ttu-id="a93a7-145">パフォーマンスの問題は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-145">A performance issue looks like this:</span></span>
  
- <span data-ttu-id="a93a7-146">管理センターの**現在の状態**がサービスについて報告しているかどうかに関係なく、パフォーマンスの問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-146">A performance issue occurs no matter what the admin center **Current health** is reporting for the service.</span></span> 
    
-  <span data-ttu-id="a93a7-147">比較的シームレスに実行するために使用された動作は、完了または完了するまでに長い時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-147">A behavior that used to be relatively seamless takes a long time to complete or never completes.</span></span> 
    
- <span data-ttu-id="a93a7-148">問題を再現したり、少なくとも、適切な一連の手順を実行したときに発生することがわかっていることを確認することもできます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-148">You can replicate the problem too, or, at least, you know it will happen if you do the right series of steps.</span></span>
    
-  <span data-ttu-id="a93a7-149">問題が断続的に発生する場合は、たとえば、10:00 AM が Office 365 に安全にアクセスできないユーザーから電話をかけてきたことがわかっていること、およびその通話が正午まで停止するというパターンがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-149">If the problem is intermittent, there is still a pattern, for example, you know that by 10:00 AM you will have calls from users who can't reliably access Office 365, and that the calls will die down around noon.</span></span> 
    
<span data-ttu-id="a93a7-150">このことはよくご存知でしょう。なじみもありません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-150">This probably sounds familiar; maybe too familiar.</span></span> <span data-ttu-id="a93a7-151">パフォーマンスの問題があることがわかったら、「次に実行することは何ですか」という質問になります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-151">Once you know it's a performance problem, the question becomes, "What do you do next?"</span></span> <span data-ttu-id="a93a7-152">この記事の残りの部分では、正確に判断するのに役立つ情報を示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-152">The rest of this article helps you determine exactly that.</span></span>
  
## <a name="how-to-define-and-test-the-performance-problem"></a><span data-ttu-id="a93a7-153">パフォーマンスの問題を定義してテストする方法</span><span class="sxs-lookup"><span data-stu-id="a93a7-153">How to define and test the performance problem</span></span>

<span data-ttu-id="a93a7-154">多くの場合、パフォーマンスの問題は時間の経過とともに浮上するため、実際の問題を定義するのは困難です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-154">Performance issues often emerge over time, so it can be challenging to define the actual problem.</span></span> <span data-ttu-id="a93a7-155">適切な問題の説明を作成して、問題のコンテキストを明確に考えてから、テストの手順を繰り返し実行して、その日に勝利する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-155">You need to create a good problem statement and a good idea of issue context, and then you need to repeatable testing steps to win the day.</span></span> <span data-ttu-id="a93a7-156">それ以外の場合、独自の障害が発生しても、失われることがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-156">Otherwise, through no fault of your own, you may be lost.</span></span> <span data-ttu-id="a93a7-157">それはなぜでしょうか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-157">Why?</span></span> <span data-ttu-id="a93a7-158">十分な情報が提供されない問題のステートメントの例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-158">Well, here are some examples of problems statements that don't provide enough information:</span></span>
  
- <span data-ttu-id="a93a7-159">自分の受信トレイから予定表への切り替えは、自分が気付かなかったようになったので、今度はコーヒーブレイクになっています。</span><span class="sxs-lookup"><span data-stu-id="a93a7-159">Switching from my Inbox to my Calendar used to be something I didn't notice, and now it's a coffee-break.</span></span> <span data-ttu-id="a93a7-160">そのような機能を使用できるようにすることはできますか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-160">Can you make it act like it used to?</span></span>
    
- <span data-ttu-id="a93a7-161">SharePoint Online へのファイルのアップロードは永遠に行われます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-161">Uploading my files to SharePoint Online is taking forever.</span></span> <span data-ttu-id="a93a7-162">午後の間に遅くなるのはなぜですか。それ以外の場合は高速ですか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-162">Why is it slow in the afternoon, but any other time, it's fast?</span></span> <span data-ttu-id="a93a7-163">すぐにはできませんか?</span><span class="sxs-lookup"><span data-stu-id="a93a7-163">Can't it just be fast?</span></span>
    
<span data-ttu-id="a93a7-164">上記の問題のステートメントには、いくつかの大きな課題があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-164">There are several large challenges posed by the problem statements above.</span></span> <span data-ttu-id="a93a7-165">具体的には、対処に多くのあいまいさがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-165">Specifically, there are a lot of ambiguities to deal with.</span></span> <span data-ttu-id="a93a7-166">例:</span><span class="sxs-lookup"><span data-stu-id="a93a7-166">for example:</span></span>
  
- <span data-ttu-id="a93a7-167">これは、ラップトップの操作に使用される受信トレイと予定表を切り替える方法を明確にしています。</span><span class="sxs-lookup"><span data-stu-id="a93a7-167">It's unclear how switching between Inbox and Calendar used to act on the laptop.</span></span>
    
- <span data-ttu-id="a93a7-168">ユーザーが "すぐにはできません" と言った場合、"fast" とは何ですか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-168">When the user says, "Can't it just be fast", what's "fast"?</span></span>
    
- <span data-ttu-id="a93a7-169">どのくらいの期間が "無期限" か</span><span class="sxs-lookup"><span data-stu-id="a93a7-169">How long is "forever"?</span></span> <span data-ttu-id="a93a7-170">この数秒または数分の間、またはユーザーが昼休みに行くことができ、ユーザーが戻ってから10分後に完了したかどうか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-170">Is that several seconds, or minutes, or could the user go to lunch and it would finish up ten minutes after the user got back?</span></span>
    
<span data-ttu-id="a93a7-171">これらのすべてについて、管理者とトラブルシューティング者は、このような問題のステートメントから多くの詳細を認識できないということを考慮する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-171">All of this is without considering that the admin and troubleshooter can't be aware of many details from problem statements like these.</span></span> <span data-ttu-id="a93a7-172">たとえば、問題が発生し始めたとき。ユーザーが自宅で作業していて、ホームネットワーク上の切り替えが低速であること。ユーザーがローカルクライアントで他の RAM を集中的に使用するアプリケーションを実行する必要がある場合、またはユーザーが以前のオペレーティングシステムを実行しているか、最近の更新プログラムを実行していない場合。</span><span class="sxs-lookup"><span data-stu-id="a93a7-172">For example, when the problem started happening; That the user works from home and only ever sees slow switching while on a home network; That the user must run several other RAM intensive applications on the local client, or the user is running an older operating system or hasn't run recent updates.</span></span>
  
<span data-ttu-id="a93a7-173">ユーザーがパフォーマンスの問題を報告する場合は、収集する情報がたくさんあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-173">When users report a performance problem, there's a lot of information to collect.</span></span> <span data-ttu-id="a93a7-174">この情報を収集することは、問題の範囲指定または調査と呼ばれるプロセスの一部です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-174">Collecting this information is part of a process called scoping the issue, or investigating it.</span></span> <span data-ttu-id="a93a7-175">以下に、パフォーマンスの問題に関する情報を収集するために使用できる基本的なスコープリストを示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-175">The following is a basic scoping list you can use to collect information about your performance issue.</span></span> <span data-ttu-id="a93a7-176">この一覧は網羅的なものではありませんが、自分で開始する場所です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-176">This list is not exhaustive, but it's a place to start one of your own:</span></span> 
  
- <span data-ttu-id="a93a7-177">問題が発生した日付と、その時刻または夜</span><span class="sxs-lookup"><span data-stu-id="a93a7-177">On what date did the issue happen, and around what time of day or night?</span></span>
    
- <span data-ttu-id="a93a7-178">どのような種類のクライアントコンピューターを使用していたか。また、どのようにしてビジネスネットワーク (VPN、有線、ワイヤレス) に接続しますか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-178">What kind of client computer were you using, and how does it connect to the business network (VPN, Wired, Wireless)?</span></span>
    
- <span data-ttu-id="a93a7-179">リモートで作業したのか、または office で作業したか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-179">Were you working remotely or were you in the office?</span></span>
    
- <span data-ttu-id="a93a7-180">別のコンピューターで同じ操作を試してみましたが、同じ現象が表示されますか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-180">Did you try the same actions on another computer and see the same behavior?</span></span>
    
- <span data-ttu-id="a93a7-181">問題を発生させる手順に従って、実行するアクションを記述できるようにします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-181">Walk through the steps that are giving you the trouble so that you can write the actions you take down.</span></span>
    
- <span data-ttu-id="a93a7-182">パフォーマンスは秒または分で遅くなりますか?</span><span class="sxs-lookup"><span data-stu-id="a93a7-182">How slow in seconds or minutes is the performance?</span></span>
    
- <span data-ttu-id="a93a7-183">世界のどこに配置していますか?</span><span class="sxs-lookup"><span data-stu-id="a93a7-183">Where in the world are you located?</span></span>
    
<span data-ttu-id="a93a7-184">これらの質問の中には、他のものよりもわかりやすいものがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-184">Some of these questions are more obvious than others.</span></span> <span data-ttu-id="a93a7-185">ほとんどのユーザーは、問題を再現するための正確な手順を必要とすることをよく理解しています。</span><span class="sxs-lookup"><span data-stu-id="a93a7-185">Most everyone will understand a troubleshooter needs the exact steps to reproduce the issue.</span></span> <span data-ttu-id="a93a7-186">それでは、どのような状況で問題が発生しているのか、どのような場合に問題が修正されたかどうかをどのようにして記録できるか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-186">After all, how else can you record what's wrong, and how else can you test if the issue is fixed?</span></span> <span data-ttu-id="a93a7-187">明白なのは、"どの日付と時刻に問題が発生しましたか?" や "世界のどこに存在していますか?" というようなものです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-187">Less obvious are things like "What date and time did you see the issue?", and "Where in the world are you located?", information that can be used in tandem.</span></span> <span data-ttu-id="a93a7-188">ユーザーがどのような状況で作業していたかによって、時間差は、会社のネットワークの一部でメンテナンスが既に進行していることを意味します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-188">Depending on when the user was working, a few hours of time difference may mean maintenance is already underway on parts of your company's network.</span></span> <span data-ttu-id="a93a7-189">たとえば、ハイブリッド実装では、SharePoint Online とオンプレミスの SharePoint Server 2013 インスタンスの両方の検索インデックスをクエリできるハイブリッドな SharePoint 検索などのハイブリッド実装が会社にある場合、オンプレミスのファームで更新が進行している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-189">If, for example, your company has a hybrid implementation, like a hybrid SharePoint Search, which can query search indexes in both SharePoint Online and an On-premises SharePoint Server 2013 instance, updates may be underway in the on-premises farm.</span></span> <span data-ttu-id="a93a7-190">企業がクラウド内にいる場合、システムの保守には、ネットワークハードウェアの追加または削除、全社的な更新プログラムのロールアウト、DNS やその他のコアインフラストラクチャへの変更などが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-190">If your company is all in the cloud, system maintenance may include adding or removing network hardware, rolling out updates that are company-wide, or making changes to DNS, or other core infrastructure.</span></span>
  
<span data-ttu-id="a93a7-191">パフォーマンスの問題のトラブルシューティングを行う場合は、犯罪に似た方法があります。証拠からすべての結論を求めるには、正確かつ observant を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-191">When you're troubleshooting a performance problem, it's a bit like a crime scene, you need to be precise and observant to draw any conclusions from the evidence.</span></span> <span data-ttu-id="a93a7-192">これを行うには、証拠を収集することによって、適切な問題のステートメントを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-192">In order to do this, you must get a good problem statement by gathering evidence.</span></span> <span data-ttu-id="a93a7-193">これには、コンピューターのコンテキスト、ユーザーのコンテキスト、問題が発生した日時、およびパフォーマンスの問題を発生させる正確な手順が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-193">It should include the computer's context, the user's context, when the problem began, and the exact steps that exposed the performance issue.</span></span> <span data-ttu-id="a93a7-194">この問題のステートメントは、ノートの一番上にあるページに入ります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-194">This problem statement should be, and stay, the topmost page in your notes.</span></span> <span data-ttu-id="a93a7-195">解決策で作業した後に問題のステートメントを再度調査することにより、実行するアクションが問題を解決したかどうかをテストして確認することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-195">By walking through the problem statement again after you work on the resolution, you are taking the steps to test and prove whether the actions you take have resolved the issue.</span></span> <span data-ttu-id="a93a7-196">これは、いつ作業が終わったかを知る上で重要です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-196">This is critical to knowing when your work, there, is done.</span></span>
  
## <a name="do-you-know-how-performance-used-to-look-when-it-was-good"></a><span data-ttu-id="a93a7-197">パフォーマンスが良好であるかどうかを確認しますか。</span><span class="sxs-lookup"><span data-stu-id="a93a7-197">Do you know how performance used to look when it was good?</span></span>

<span data-ttu-id="a93a7-198">Unlucky の場合、誰も知りません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-198">If you're unlucky, nobody knows.</span></span> <span data-ttu-id="a93a7-199">何も番号を持っていません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-199">Nobody had numbers.</span></span> <span data-ttu-id="a93a7-200">そのため、誰でも、「Office 365 で受信トレイを起動するのに使用した時間について」、または「役員が Lync Online 会議を開催したときにどのくらい時間がかかったか」という簡単な質問に回答することができます。これは、多くの企業に共通のシナリオです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-200">That means nobody can answer the simple question "About how many seconds did it used to take to bring up an Inbox in Office 365?", or "How long did it used to take when the Executives had a Lync Online meeting?", which is a common scenario for many companies.</span></span>
  
<span data-ttu-id="a93a7-201">ここで不足しているのはパフォーマンスベースラインです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-201">What's missing here is a performance baseline.</span></span>
  
<span data-ttu-id="a93a7-202">ベースラインを使用すると、パフォーマンスのコンテキストがわかります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-202">Baselines give you a context for your performance.</span></span> <span data-ttu-id="a93a7-203">会社のニーズに応じて、基準計画を頻繁に実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-203">You should take a baseline occasionally to frequently, depending on the needs of your company.</span></span> <span data-ttu-id="a93a7-204">大規模な企業の場合、運用チームは既にオンプレミス環境のベースラインを使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-204">If you are a larger company, your Operations team may take baselines for your on-premises environment already.</span></span> <span data-ttu-id="a93a7-205">たとえば、月の第1月曜日にすべての Exchange サーバーを修正し、3番目の月曜日にすべての SharePoint サーバーにパッチを適用した場合、運用チームは、重要な機能が動作していることを確認するために、パッチ適用後に実行されたタスクとシナリオのリストを持っている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-205">For example, if you patch all the Exchange servers on the first Monday of the month, and all your SharePoint servers on the third Monday, your Operations team probably has a list of tasks and scenarios it runs post-patching, to prove that critical functions are operational.</span></span> <span data-ttu-id="a93a7-206">たとえば、受信トレイを開いて、[送受信] をクリックし、フォルダーが更新されていることを確認します。 SharePoint では、サイトのメインページを参照し、エンタープライズ検索ページに移動して、結果を返す検索を実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-206">For example, opening the Inbox, clicking Send/Receive, and making sure the folders update, or, in SharePoint, browsing the main page of the site, going into the enterprise Search page, and doing a search that returns results.</span></span>
  
<span data-ttu-id="a93a7-207">アプリケーションが Office 365 にある場合は、ネットワーク内のクライアントコンピューターから、出口ポイント、またはネットワークから離れた場所に Office 365 に移行する時間 (ミリ秒単位) を測定するために、最も基本的な基準の一部を使用できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-207">If your applications are in Office 365, some of the most fundamental baselines you can take measure the time (in milliseconds) from a client computer inside your network, to an egress point, or the point where you leave your network and go out to Office 365.</span></span> <span data-ttu-id="a93a7-208">以下に、調査および記録できるいくつかの参考基準を示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-208">Here are some helpful baselines that you can investigate and record:</span></span>
  
- <span data-ttu-id="a93a7-209">クライアントコンピューターと出口ポイントの間のデバイス (たとえば、プロキシサーバー) を特定します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-209">Identify the devices between your client computer and your egress point, for example, your proxy server.</span></span>
    
  - <span data-ttu-id="a93a7-210">パフォーマンスの問題が発生した場合に、コンテキスト (IP アドレス、デバイスの種類、et cetera) があることをデバイスに通知する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-210">You need to know your devices so that you have context (IP addresses, type of device, et cetera) for performance problems that arise.</span></span>
    
  - <span data-ttu-id="a93a7-211">プロキシサーバーは一般的な出口ポイントなので、web ブラウザーでどのプロキシサーバーが使用されているかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-211">Proxy servers are common egress points, so you can check your web browser to see what proxy server it is set to use, if any.</span></span>
    
  - <span data-ttu-id="a93a7-212">ネットワークを検出してマップできるサードパーティ製のツールがありますが、デバイスを最も安全に知る方法は、ネットワークチームのメンバーに依頼することです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-212">There are third party tools that can discover and map your network, but the safest way to know your devices is to ask a member of your network team.</span></span>
    
- <span data-ttu-id="a93a7-213">インターネットサービスプロバイダー (ISP) を特定し、連絡先情報を書き留め、どの程度の帯域幅を使用しているかを確認します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-213">Identify your Internet service provider (ISP), write down their contact information, and ask how many circuits how much bandwidth you have.</span></span>
    
- <span data-ttu-id="a93a7-214">社内で、クライアントと出口の間にあるデバイスのリソースを特定するか、ネットワークの問題について説明する緊急連絡先を特定します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-214">Inside your company, identify resources for the devices between your client and the egress point, or identify an emergency contact to talk to about networking issues.</span></span>
    
<span data-ttu-id="a93a7-215">以下に、ツールを使用した簡単なテストで計算できる基準をいくつか示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-215">Here are some baselines that simple testing with tools can calculate for you:</span></span>
  
- <span data-ttu-id="a93a7-216">クライアントコンピューターから出口ポイントまでの時間 (ミリ秒)</span><span class="sxs-lookup"><span data-stu-id="a93a7-216">Time from your client computer to your egress point in milliseconds</span></span>
    
- <span data-ttu-id="a93a7-217">出口ポイントから Office 365 までの時間 (ミリ秒)</span><span class="sxs-lookup"><span data-stu-id="a93a7-217">Time from your egress point to Office 365 in milliseconds</span></span>
    
- <span data-ttu-id="a93a7-218">参照時に Office 365 の URL を解決する、サーバーの世界の場所</span><span class="sxs-lookup"><span data-stu-id="a93a7-218">Location in the world of the server that resolves the URLS for Office 365 when you browse</span></span>
    
- <span data-ttu-id="a93a7-219">ISP の DNS 解決の速度 (ミリ秒)、パケット到着 (ネットワークのジッター) の不整合、アップロード時間とダウンロード時間 (ミリ秒)</span><span class="sxs-lookup"><span data-stu-id="a93a7-219">The speed of your ISP's DNS resolution in milliseconds, inconsistencies in packet arrival (network jitter), upload and download times in milliseconds</span></span>
    
<span data-ttu-id="a93a7-220">これらの手順を実行する方法についてよく知らない場合は、この記事の詳細をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-220">If you're unfamiliar with how to carry out these steps, we'll go into more detail in this article.</span></span> 
  
## <a name="what-is-a-baseline"></a><span data-ttu-id="a93a7-221">ベースラインとは</span><span class="sxs-lookup"><span data-stu-id="a93a7-221">What is a baseline?</span></span>

<span data-ttu-id="a93a7-222">障害が発生した場合の影響について理解していますが、過去のパフォーマンスデータがわからない場合は、どのような状況が発生しているか、およびいつ発生したかについてのコンテキストを設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-222">You'll know the impact when it goes bad, but if you don't know your historical performance data, it's not possible to have a context for how bad it may have become, and when.</span></span> <span data-ttu-id="a93a7-223">そのため、ベースラインを使用しないと、パズルを解決するための重要な手掛かりとして、パズルボックスに画像が表示されていないことがわかります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-223">So without a baseline, you're missing the key clue to solve the puzzle: the picture on the puzzle box.</span></span> <span data-ttu-id="a93a7-224">パフォーマンスのトラブルシューティングでは、*比較*のポイントが必要です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-224">In performance troubleshooting, you need a point of  *comparison*  .</span></span> <span data-ttu-id="a93a7-225">シンプルなパフォーマンスベースラインを実行することは困難です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-225">Simple performance baselines aren't difficult to take.</span></span> <span data-ttu-id="a93a7-226">運用チームは、これらをスケジュールに基づいて実施することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-226">Your Operations team can be tasked with carrying these out on a schedule.</span></span> <span data-ttu-id="a93a7-227">たとえば、次のような接続があるとします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-227">For example, let's say your connection looks like this:</span></span> 
  
![クライアント、プロキシ、および Office 365 のクラウドを示す基本的なネットワークグラフィックス。](media/c6ca7140-09f9-4c2d-a775-dbf2820eaa0c.PNG)
  
<span data-ttu-id="a93a7-229">これは、ネットワークチームに確認して、プロキシサーバーを介してインターネットを使用していて、そのプロキシが、クライアントコンピューターがクラウドに送信するすべての要求を処理することを検出したことを意味します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-229">That means you've checked with your network team and found out that you leave your company for the Internet through a proxy server, and that proxy handles all the requests your client computer sends to the cloud.</span></span> <span data-ttu-id="a93a7-230">この場合、介在するすべてのデバイスを一覧表示する簡略版の接続を描画する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-230">In this case, you should draw a simplified version of your connection that lists all the intervening devices.</span></span> <span data-ttu-id="a93a7-231">これで、クライアント、出口ポイント (ネットワークを使用してインターネットに接続した場所)、および Office 365 cloud の間のパフォーマンスをテストするために使用できるツールが挿入されました。</span><span class="sxs-lookup"><span data-stu-id="a93a7-231">Now, insert tools that you can use to test the performance between the client, the egress point (where you leave your network for the Internet), and the Office 365 cloud.</span></span>
  
![クライアント、プロキシ、クラウドを使用した基本的なネットワークと、PSPing、TraceTCP、およびネットワークトレースについて提案するツール。](media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
<span data-ttu-id="a93a7-233">これらのオプションは、パフォーマンスデータを検索するために必要な専門知識があるため、**シンプル**で、かつ**高度**なものとして一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-233">The options are listed as **Simple** and **Advanced** because of the amount of expertise you need in order to find the performance data.</span></span> <span data-ttu-id="a93a7-234">ネットワークトレースには、PsPing や TraceTCP のようなコマンドラインツールの実行と比較して、多くの時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-234">A network trace will take a lot of time, compared to running command-line tools like PsPing and TraceTCP.</span></span> <span data-ttu-id="a93a7-235">これらの2つのコマンドラインツールは、Office 365 によってブロックされる ICMP パケットを使用しないため、またはクライアントコンピューターを離れる時間 (アクセス可能な場合) や Office 365 に到着するまでの時間をミリ秒単位で提供するために選択されました。</span><span class="sxs-lookup"><span data-stu-id="a93a7-235">These two command-line tools were chosen because they don't use ICMP packets, which will be blocked by Office 365, and because they give the time in milliseconds that it takes to leave the client computer, or proxy server (if you have access) and arrive at Office 365.</span></span> <span data-ttu-id="a93a7-236">1台のコンピューターから別のコンピューターへの各ホップは、時刻の値を設定することができるので、ベースラインに適しています。</span><span class="sxs-lookup"><span data-stu-id="a93a7-236">Each individual hop from one computer to another will end up with a time value, and that's great for baselines!</span></span> <span data-ttu-id="a93a7-237">重要なのは、これらのコマンドラインツールを使用すると、コマンドにポート番号を追加することができます。これは、Office 365 がポート443を介して通信するために役立ちます。これは、Secure Sockets Layer とトランスポート層セキュリティ (SSL および TLS) で使用されるポートです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-237">Just as importantly, these command-line tools allow you to add a port number onto the command, this is useful because Office 365 communicates over port 443, which is the port used by Secure Sockets Layer and Transport Layer Security (SSL and TLS).</span></span> <span data-ttu-id="a93a7-238">ただし、他のサードパーティ製ツールでは、状況に応じたソリューションが適している場合があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-238">However, other third-party tools may be better solutions for your situation.</span></span> <span data-ttu-id="a93a7-239">Microsoft では、これらのツールのすべてがサポートされていないため、何らかの理由で PsPing および TraceTCP の動作を取得できない場合は、Netmon のようなツールを使用してネットワークトレースに移行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-239">Microsoft doesn't support all of these tools, so if, for some reason, you can't get PsPing and TraceTCP working, move on to a network trace with a tool like Netmon.</span></span> 
  
<span data-ttu-id="a93a7-240">業務時間外に基準計画を作成し、その後で時間の経過とともに再び使用することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-240">You can take a baseline before business hours, again during heavy use, and then again after hours.</span></span> <span data-ttu-id="a93a7-241">つまり、最後に次のような形式のフォルダー構造があるということです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-241">This means you may have a folder structure that looks a bit like this in the end:</span></span>
  
![パフォーマンス データをフォルダーに整理する方法を提示している図。](media/13e01ffa-f0f2-4d10-b89d-d5980ec89fae.png)
  
<span data-ttu-id="a93a7-243">また、ファイルの名前付け規則を選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-243">You should also pick a naming convention your files.</span></span> <span data-ttu-id="a93a7-244">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-244">Here are some examples:</span></span>
  
- <span data-ttu-id="a93a7-245">Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal</span><span class="sxs-lookup"><span data-stu-id="a93a7-245">Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal</span></span>
    
- <span data-ttu-id="a93a7-246">Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW</span><span class="sxs-lookup"><span data-stu-id="a93a7-246">Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW</span></span>
    
- <span data-ttu-id="a93a7-247">Feb_08_2015_2pmEST_PerfBaseline_BADPerf</span><span class="sxs-lookup"><span data-stu-id="a93a7-247">Feb_08_2015_2pmEST_PerfBaseline_BADPerf</span></span>
    
- <span data-ttu-id="a93a7-248">Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf</span><span class="sxs-lookup"><span data-stu-id="a93a7-248">Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf</span></span>
    
<span data-ttu-id="a93a7-249">これを行うにはさまざまな方法がありますが、その形式を使用して始めることを **\<dateTime\>\<what's happening in the test\>** お勧めします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-249">There are lots of different ways to do this, but using the format **\<dateTime\>\<what's happening in the test\>** is a good place to start.</span></span> <span data-ttu-id="a93a7-250">このことを入念に確認しておくと、後で問題をトラブルシューティングする際に多くのことができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-250">Being diligent about this will help a lot when you are trying to troubleshoot issues later.</span></span> <span data-ttu-id="a93a7-251">後で、"2 月8日に2つのトレースを使用しました。1つは良好なパフォーマンスを示し、不良があることがわかりました。それらを比較できるようになりました" と言うことができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-251">Later, you'll be able to say "I took two traces on February 8th, one showed good performance and one showed bad, so we can compare them".</span></span> <span data-ttu-id="a93a7-252">これは、トラブルシューティングに非常に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-252">This is extremely helpful for troubleshooting.</span></span> 
  
<span data-ttu-id="a93a7-253">過去のベースラインを維持するための方法を整理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-253">You need to have an organized way to keep your historical baselines.</span></span> <span data-ttu-id="a93a7-254">この例では、単純なメソッドによって3つのコマンドライン出力が生成され、結果がスクリーンショットとして収集されましたが、代わりにネットワークキャプチャファイルを使用している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-254">In this example, the simple methods produced three command line outputs and the results were collected as screen shots, but you may have network capture files instead.</span></span> <span data-ttu-id="a93a7-255">適切に機能するメソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-255">Use the method that works best for you.</span></span> <span data-ttu-id="a93a7-256">過去のベースラインを保存し、オンラインサービスの動作に変化がある点を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-256">Store your historical baselines and refer to them at points where you notice changes in the behavior of online services.</span></span> 
  
## <a name="why-collect-performance-data-during-a-pilot"></a><span data-ttu-id="a93a7-257">パイロット時にパフォーマンスデータを収集する理由</span><span class="sxs-lookup"><span data-stu-id="a93a7-257">Why collect performance data during a pilot?</span></span>

<span data-ttu-id="a93a7-258">Office 365 サービスのパイロットと比較して、ベースラインを開始する時間を短縮することはできません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-258">There is no better time to start making baselines than during a pilot of the Office 365 service.</span></span> <span data-ttu-id="a93a7-259">Office には、数千人のユーザー、数十万、または5人がいる場合がありますが、ユーザー数が少ない場合でも、パフォーマンスの変動を測定するテストを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-259">Your office may have thousands of users, hundreds of thousands, or it may have five, but even with a small number of users, you can perform tests to measure fluctuations in performance.</span></span> <span data-ttu-id="a93a7-260">大規模な企業の場合、数百のユーザーの代表的なサンプルである Office 365 を試験的に実行することで、問題が発生する前に問題が発生する可能性があることを知ることができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-260">In the case of a large company, a representative sample of several hundred users piloting Office 365 can be projected outward to several thousands so you know where issues might arise before they happen.</span></span>
  
<span data-ttu-id="a93a7-261">小規模な企業の場合は、すべてのユーザーが同時にサービスに移動し、パイロットが存在しないことを意味するため、パフォーマンスを維持して、ユーザーが不適切な操作を実行する際にトラブルシューティングが必要になる可能性があるユーザーに対して表示するデータを確保できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-261">In the case of a small company, where on-boarding means that all users go to the service at the same time and there is no pilot, keep performance measures so that you have data to show to anyone who may have to troubleshoot a badly performing operation.</span></span> <span data-ttu-id="a93a7-262">たとえば、非常に短時間で使用されていた中規模のグラフィックスをアップロードする時間に、建物を一周することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-262">For example, if you notice that all of a sudden you can walk around your building in the time it takes to upload a medium-sized graphic where it used to happen very quickly.</span></span>
  
## <a name="how-to-collect-baselines"></a><span data-ttu-id="a93a7-263">ベースラインを収集する方法</span><span class="sxs-lookup"><span data-stu-id="a93a7-263">How to collect baselines</span></span>

<span data-ttu-id="a93a7-264">すべてのトラブルシューティングプランでは、少なくとも次のことを特定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-264">For all troubleshooting plans you need to identify these things at a minimum:</span></span>
  
- <span data-ttu-id="a93a7-265">使用しているクライアントコンピューター (コンピューターまたはデバイスの種類、IP アドレス、問題の原因となったアクション)</span><span class="sxs-lookup"><span data-stu-id="a93a7-265">The client computer you're using (the type of computer or device, an IP address, and the actions that caused the issue)</span></span>
    
- <span data-ttu-id="a93a7-266">クライアントコンピューターが世界に配置されている場所 (たとえば、このユーザーがネットワークに VPN 経由でリモートで作業しているか、または会社のイントラネット上にあるか)</span><span class="sxs-lookup"><span data-stu-id="a93a7-266">Where the client computer is located in the world (for example, whether this user on a VPN to the network, working remotely, or on the company intranet)</span></span>
    
- <span data-ttu-id="a93a7-267">クライアントコンピューターがネットワークから使用する出口ポイント (ISP またはインターネットに対してトラフィックが発生したポイント)</span><span class="sxs-lookup"><span data-stu-id="a93a7-267">The egress point the client computer uses from your network (the point at which traffic leaves your business for an ISP or the Internet)</span></span>
    
 <span data-ttu-id="a93a7-268">ネットワークのレイアウトは、ネットワーク管理者から確認できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-268">You can find out the layout of your network from the network administrator.</span></span> <span data-ttu-id="a93a7-269">小規模なネットワークを使用している場合は、インターネットに接続されているデバイスを調べ、レイアウトについての質問がある場合は、ISP にお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-269">If you're on a small network, take a look at the devices connecting you to the Internet, and call your ISP if you have questions about the layout.</span></span> <span data-ttu-id="a93a7-270">参照用の最終的なレイアウトのグラフィックを作成します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-270">Create a graphic of the final layout for your reference.</span></span> 
  
<span data-ttu-id="a93a7-271">このセクションは、シンプルなコマンドラインツールとメソッド、および高度なツールオプションに分かれています。</span><span class="sxs-lookup"><span data-stu-id="a93a7-271">This section is broken into simple command-line tools and methods, and more advanced tools options.</span></span> <span data-ttu-id="a93a7-272">最初に、単純な方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-272">We'll cover simple methods first.</span></span> <span data-ttu-id="a93a7-273">ただし、現時点でパフォーマンスの問題が発生している場合は、高度な方法に進んで、サンプルのパフォーマンスのトラブルシューティングアクションプランを試す必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-273">But if you've got a performance problem right now, you should jump to advanced methods and try out the sample performance-troubleshooting action plan.</span></span>
  
### <a name="simple-methods"></a><span data-ttu-id="a93a7-274">単純なメソッド</span><span class="sxs-lookup"><span data-stu-id="a93a7-274">Simple methods</span></span>

<span data-ttu-id="a93a7-275">これらの簡単な方法の目的は、時間の経過とともに単純なパフォーマンス基準を取得、理解、および適切に保存する方法を学習することです。これにより、Office 365 のパフォーマンスについて通知されます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-275">The objective of these simple methods is to learn to take, understand, and properly store simple performance baselines over time so that you are informed about Office 365 performance.</span></span> <span data-ttu-id="a93a7-276">前にも説明したように、単純な単純な図を次に示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-276">Here's the very simple diagram for simple, as you've seen before:</span></span>
  
![クライアント、プロキシ、クラウドを使用した基本的なネットワークと、PSPing、TraceTCP、およびネットワークトレースについて提案するツール。](media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
> [!NOTE]
> <span data-ttu-id="a93a7-278">このスクリーンショットは、このスクリーンショットに含まれています。これは、要求が処理されるまでの時間をミリ秒単位で表示するための便利なツールであり、1台のコンピューターから次のコンピューターへの接続によって宛先に到達するまでの接続の数を示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-278">TraceTCP is included in this screen shot because it's a useful tool for showing, in milliseconds, how long a request takes to process, and how many network hops, or connections from one computer to the next, that the request takes to reach a destination.</span></span> <span data-ttu-id="a93a7-279">TraceTCP は、ホップ時に使用されるサーバーの名前を指定することもできます。これは、サポートの Microsoft Office 365 のトラブルシューティングに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-279">TraceTCP can also give the names of servers used during hops, which can be useful to a Microsoft Office 365 troubleshooter in Support.</span></span> <span data-ttu-id="a93a7-280">> TraceTCP コマンドは、次のような単純なものにすることができます。 > `tracetcp.exe outlook.office365.com:443`> コマンドにポート番号を含めることを忘れないでください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-280">> TraceTCP commands can be very simple, such as: >  `tracetcp.exe outlook.office365.com:443`> Remember to include the port number in the command!</span></span><span data-ttu-id="a93a7-281"> > [Tracetcp](https://simulatedsimian.github.io/tracetcp_download.html)は無料でダウンロードできますが、wincap に依存します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-281"> > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) is a free download, but relies on Wincap.</span></span> <span data-ttu-id="a93a7-282">Wincap は、Netmon でも使用され、インストールされているツールです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-282">Wincap is a tool that is also used and installed by Netmon.</span></span> <span data-ttu-id="a93a7-283">「Advanced メソッド」セクションでも Netmon を使用しています。</span><span class="sxs-lookup"><span data-stu-id="a93a7-283">We also use Netmon in the advanced methods section.</span></span> 
  
 <span data-ttu-id="a93a7-284">複数のオフィスがある場合は、それぞれの場所にクライアントのデータセットも保持する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-284">If you have multiple offices, you'll need to keep a set of data from a client in each of those locations as well.</span></span> <span data-ttu-id="a93a7-285">このテストでは待機時間が測定されます。この値は、クライアントが Office 365 に要求を送信してから、Office 365 が要求に応答するまでの時間を表す数値です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-285">This test measures latency, which, in this case, is a number value that describes the amount of time between a client sending a request to Office 365, and Office 365 responding to the request.</span></span> <span data-ttu-id="a93a7-286">このテストは、クライアントコンピューター上のドメイン内で行われ、ネットワーク内部から、出口ポイントから、インターネットを介して Office 365 に至るまでのラウンドトリップを測定するようになります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-286">The testing originates inside your domain on a client computer, and looks to measure a round trip from inside your network, out through an egress point, across the Internet to Office 365, and back.</span></span> 
  
<span data-ttu-id="a93a7-287">出口ポイント (この場合はプロキシサーバー) を処理するには、いくつかの方法があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-287">There are a few ways to deal with the egress point, in this case, the proxy server.</span></span> <span data-ttu-id="a93a7-288">1から2、2から3までトレースすることができ、その数をミリ秒単位で追加して、ネットワークのエッジに最終的な合計を取得することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-288">You can either trace from 1 to 2 and then 2 to 3, and then add the numbers in milliseconds to get a final total to the edge of your network.</span></span> <span data-ttu-id="a93a7-289">または、Office 365 アドレスのプロキシをバイパスするように接続を構成することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-289">Or, you can configure the connection to bypass the proxy for Office 365 addresses.</span></span> <span data-ttu-id="a93a7-290">ファイアウォール、リバースプロキシ、またはこの2つの組み合わせを備えた大規模なネットワークでは、多くの Url にトラフィックを渡すことができるようにするために、プロキシサーバー上で例外を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-290">In a larger network with a firewall, reverse proxy, or some combination of the two, you may need to make exceptions on the proxy server that will allow traffic to pass for a lot of URLs.</span></span> <span data-ttu-id="a93a7-291">Office 365 で使用されるエンドポイントの一覧については、「 [office 365 の url と IP アドレスの範囲](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-291">For the list of endpoints used by Office 365, see [Office 365 URLs and IP address ranges](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span> <span data-ttu-id="a93a7-292">認証プロキシを使用している場合は、まず、以下の例外をテストします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-292">If you have an authenticating proxy, begin by testing exceptions for the following:</span></span>
  
- <span data-ttu-id="a93a7-293">ポート80および443</span><span class="sxs-lookup"><span data-stu-id="a93a7-293">Ports 80 and 443</span></span>
    
- <span data-ttu-id="a93a7-294">TCP および HTTPs</span><span class="sxs-lookup"><span data-stu-id="a93a7-294">TCP and HTTPs</span></span>
    
- <span data-ttu-id="a93a7-295">これらの Url のいずれかに送信される接続:</span><span class="sxs-lookup"><span data-stu-id="a93a7-295">Connections that are outbound to any of these URLs:</span></span>
    
- <span data-ttu-id="a93a7-296">\*. microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-296">\*.microsoftonline.com</span></span>
    
- <span data-ttu-id="a93a7-297">\*. microsoftonline-p.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-297">\*.microsoftonline-p.com</span></span>
    
- <span data-ttu-id="a93a7-298">\*.sharepoint.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-298">\*.sharepoint.com</span></span>
    
- <span data-ttu-id="a93a7-299">\*. outlook.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-299">\*.outlook.com</span></span>
    
- <span data-ttu-id="a93a7-300">\*. lync.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-300">\*.lync.com</span></span>
    
- <span data-ttu-id="a93a7-301">osub.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-301">osub.microsoft.com</span></span>
    
<span data-ttu-id="a93a7-302">すべてのユーザーは、プロキシの干渉や認証を行わずに、これらのアドレスにアクセスできるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-302">All users need to be allowed to get to these addresses without any proxy interference or authentication.</span></span> <span data-ttu-id="a93a7-303">小規模なネットワークでは、web ブラウザーのプロキシバイパスリストにこれらを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-303">On a smaller network, you should add these to your proxy bypass list in your web browser.</span></span> 
  
<span data-ttu-id="a93a7-304">Internet Explorer のプロキシバイパスリストにこれらを追加するには、[**ツール**] [ \> **インターネットオプション**] [ \> **接続** \> **LAN の設定**] \> **[詳細**] に移動します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-304">To add these to your proxy bypass list in Internet Explorer, go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span></span> <span data-ttu-id="a93a7-305">[詳細設定] タブには、プロキシサーバーとプロキシサーバーのポートも表示されます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-305">The advanced tab is also where you will find your proxy server and proxy server port.</span></span> <span data-ttu-id="a93a7-306">[**詳細設定**] ボタンにアクセスするには、[ **LAN にプロキシサーバーを使用**する] チェックボックスをオンにする必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-306">You may need to click the checkbox **Use a proxy server for your LAN**, to access the **Advanced** button.</span></span> <span data-ttu-id="a93a7-307">**ローカルアドレスにはプロキシサーバーを使用**しないことを確認するようにします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-307">You'll want to make sure that **Bypass proxy server for local addresses** is checked.</span></span> <span data-ttu-id="a93a7-308">[**詳細設定**] をクリックすると、例外を入力できるテキストボックスが表示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-308">Once you click **Advanced**, you'll see a text box where you can enter exceptions.</span></span> <span data-ttu-id="a93a7-309">上記のワイルドカード Url はセミコロンで区切ります。たとえば、次のように記述します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-309">Separate the wildcard URLs listed above with semi-colons, for example:</span></span>
  
<span data-ttu-id="a93a7-310">\*. microsoftonline.com;\*. sharepoint.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-310">\*.microsoftonline.com; \*.sharepoint.com</span></span>
  
<span data-ttu-id="a93a7-311">プロキシをバイパスすると、Office 365 URL で直接 ping または PsPing を使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-311">Once you bypass your proxy, you should be able to use ping or PsPing directly on an Office 365 URL.</span></span> <span data-ttu-id="a93a7-312">次の手順では、ping **outlook.office365.com**をテストします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-312">The next step will be to test ping **outlook.office365.com**.</span></span> <span data-ttu-id="a93a7-313">または、PsPing を使用している場合、またはコマンドにポート番号を指定する別のツールを使用している場合は、 **portal.microsoftonline.com:443**に対する psping がミリ秒単位の平均ラウンドトリップ時間を確認します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-313">Or, if you're using PsPing or another tool that will let you supply a port number to the command, PsPing against **portal.microsoftonline.com:443** to see the average round trip time in milliseconds.</span></span> 
  
<span data-ttu-id="a93a7-314">ラウンドトリップ時間 (RTT) は、outlook.office365.com のようなサーバーに HTTP 要求を送信するのにかかる時間を測定する数値です。この値は、サーバーに認識されたことを確認する応答を取得します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-314">The round trip time, or RTT, is a number value that measures how long it takes to send a HTTP request to a server like outlook.office365.com and get a response back that acknowledges the server knows that you did it.</span></span> <span data-ttu-id="a93a7-315">この省略形が RTT として表示されることがあります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-315">You'll sometimes see this abbreviated as RTT.</span></span> <span data-ttu-id="a93a7-316">この値は比較的短時間である必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-316">This should be a relatively short amount of time.</span></span>
  
<span data-ttu-id="a93a7-317">このテストを行うには、Office 365 によってブロックされる ICMP パケットを使用しない、 [Psping](https://technet.microsoft.com/sysinternals/jj729731.aspx)または他のツールを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-317">You have to use [PSPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) or another tool that does not use ICMP packets which are blocked by Office 365 in order to do this test.</span></span> 
  
 <span data-ttu-id="a93a7-318">**PsPing を使用して Office 365 URL から直接のラウンドトリップ時間をミリ秒単位で取得する方法**</span><span class="sxs-lookup"><span data-stu-id="a93a7-318">**How to use PsPing to get an overall round trip time in milliseconds directly from an Office 365 URL**</span></span>
  
1. <span data-ttu-id="a93a7-319">次の手順を実行して、管理者特権でのコマンドプロンプトを実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-319">Run an elevated command prompt by completing these steps:</span></span>
    
1. <span data-ttu-id="a93a7-320">**[開始]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-320">Click **Start**.</span></span>
    
2. <span data-ttu-id="a93a7-321">[**検索の開始**] ボックスに「cmd」と入力し、CTRL + SHIFT + enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-321">In the **Start Search** box, type cmd, and then press CTRL+SHIFT+ENTER.</span></span>
    
3. <span data-ttu-id="a93a7-322">**[ユーザー アカウント制御]** ダイアログ ボックスが表示された場合、このボックスに希望する動作が表示されていることを確認し、**[継続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-322">If the **User Account Control** dialog box appears, confirm that the action it displays is what you want, and then click **Continue**.</span></span>
    
2. <span data-ttu-id="a93a7-323">ツール (この場合は PsPing) がインストールされているフォルダーに移動し、これらの Office 365 の Url をテストします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-323">Navigate to the folder where the tool (in this case PsPing) is installed and test these Office 365 URLs:</span></span>
    
  - <span data-ttu-id="a93a7-324">psping portal.office.com:443</span><span class="sxs-lookup"><span data-stu-id="a93a7-324">psping portal.office.com:443</span></span>
    
  - <span data-ttu-id="a93a7-325">psping microsoft-my.sharepoint.com:443</span><span class="sxs-lookup"><span data-stu-id="a93a7-325">psping microsoft-my.sharepoint.com:443</span></span>
    
  - <span data-ttu-id="a93a7-326">psping outlook.office365.com:443</span><span class="sxs-lookup"><span data-stu-id="a93a7-326">psping outlook.office365.com:443</span></span>
    
  - <span data-ttu-id="a93a7-327">psping www.yammer.com:443</span><span class="sxs-lookup"><span data-stu-id="a93a7-327">psping www.yammer.com:443</span></span>
    
    ![PSPing コマンドは microsoft-my.sharepoint.com ポート443に送られます。](media/3258f620-4513-4e82-95c9-06b387fc3a82.PNG)
  
<span data-ttu-id="a93a7-329">443のポート番号が含まれていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-329">Be sure to include the port number of 443.</span></span> <span data-ttu-id="a93a7-330">Office 365 は暗号化されたチャネルで動作することに注意してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-330">Remember that Office 365 works on an encrypted channel.</span></span> <span data-ttu-id="a93a7-331">ポート番号を指定せずに PsPing を行うと、要求は失敗します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-331">If you PsPing without the port number, your request will fail.</span></span> <span data-ttu-id="a93a7-332">短い一覧で ping を実行したら、平均時間 (ミリ秒) を探します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-332">Once you've pinged your short list, look for the Average time in milliseconds (ms).</span></span> <span data-ttu-id="a93a7-333">これで、記録することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-333">That is what you want to record!</span></span>
  
![2.8 ミリ秒のラウンドトリップ時間を使用して、PSPing をプロキシするクライアントの図を示す図。](media/96901aea-1093-4f1b-b5a3-6078e9035e6c.png)
  
<span data-ttu-id="a93a7-335">プロキシバイパスに慣れておらず、手順を追って説明したい場合は、まずプロキシサーバーの名前を確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-335">If you're not familiar with proxy bypass, and prefer to take things step-by-step, you need to first find out the name of your proxy server.</span></span> <span data-ttu-id="a93a7-336">Internet Explorer で、[**ツール** \> **] [インターネットオプション]** [ \> **接続**LAN の設定] の \> **LAN settings** \> **[詳細**] に移動します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-336">In Internet Explorer go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span></span> <span data-ttu-id="a93a7-337">**[詳細設定**] タブには、プロキシサーバーの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-337">The **Advanced** tab is where you will see your proxy server listed.</span></span> <span data-ttu-id="a93a7-338">このタスクを完了することで、プロキシサーバーに対してコマンドプロンプトで Ping を実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-338">Ping that proxy server at a command prompt by completing this task:</span></span> 
  
 <span data-ttu-id="a93a7-339">**プロキシサーバーに対して ping を行い、ステージ1から2のラウンドトリップ値をミリ秒単位で取得するには**</span><span class="sxs-lookup"><span data-stu-id="a93a7-339">**To ping the proxy server and get a round trip value in milliseconds for stage 1 to 2**</span></span>
  
1. <span data-ttu-id="a93a7-340">次の手順を実行して、管理者特権でのコマンドプロンプトを実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-340">Run an elevated command prompt by completing these steps:</span></span>
    
1. <span data-ttu-id="a93a7-341">**[開始]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-341">Click **Start**.</span></span>
    
2. <span data-ttu-id="a93a7-342">[**検索の開始**] ボックスに「cmd」と入力し、CTRL + SHIFT + enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-342">In the **Start Search** box, type cmd, and then press CTRL+SHIFT+ENTER.</span></span>
    
3. <span data-ttu-id="a93a7-343">**[ユーザー アカウント制御]** ダイアログ ボックスが表示された場合、このボックスに希望する動作が表示されていることを確認し、**[継続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-343">If the **User Account Control** dialog box appears, confirm that the action it displays is what you want, and then click **Continue**.</span></span>
    
2. <span data-ttu-id="a93a7-344">Ping と入力し \<the name of the proxy server your browser uses, or the IP address of the proxy server\> 、enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-344">Type ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> and then press ENTER.</span></span> <span data-ttu-id="a93a7-345">PsPing またはその他のツールがインストールされている場合は、代わりにそのツールを使用することを選択できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-345">If you have PsPing, or some other tool, installed, you can choose to use that tool instead.</span></span> 
    
    <span data-ttu-id="a93a7-346">コマンドは、次の例のいずれかのようになります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-346">Your command may look like any of these examples:</span></span> 
    
  - <span data-ttu-id="a93a7-347">ping ourproxy.ourdomain.industry.business.com</span><span class="sxs-lookup"><span data-stu-id="a93a7-347">ping ourproxy.ourdomain.industry.business.com</span></span>
    
  - <span data-ttu-id="a93a7-348">ping 155.55.121.55</span><span class="sxs-lookup"><span data-stu-id="a93a7-348">ping 155.55.121.55</span></span>
    
  - <span data-ttu-id="a93a7-349">ping ourproxy</span><span class="sxs-lookup"><span data-stu-id="a93a7-349">ping ourproxy</span></span>
    
  - <span data-ttu-id="a93a7-350">psping ourproxy.ourdomain.industry.business.com:80</span><span class="sxs-lookup"><span data-stu-id="a93a7-350">psping ourproxy.ourdomain.industry.business.com:80</span></span>
    
  - <span data-ttu-id="a93a7-351">psping 155.55.121.55:80</span><span class="sxs-lookup"><span data-stu-id="a93a7-351">psping 155.55.121.55:80</span></span>
    
  - <span data-ttu-id="a93a7-352">psping ourproxy:80</span><span class="sxs-lookup"><span data-stu-id="a93a7-352">psping ourproxy:80</span></span>
    
3. <span data-ttu-id="a93a7-353">トレースがテストパケットの送信を停止すると、平均時間 (ミリ秒単位) を示す小さな要約が表示され、それが後の値となります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-353">When the trace stops sending test packets, you'll get a small summary that lists an average, in milliseconds, and that's the value you're after.</span></span> <span data-ttu-id="a93a7-354">プロンプトのスクリーンショットを取り、名前付け規則を使用して保存します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-354">Take a screen shot of the prompt and save it using your naming convention.</span></span> <span data-ttu-id="a93a7-355">この時点で、図面に値を入力することもできます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-355">At this point it may also help to fill in the diagram with the value.</span></span>
    
<span data-ttu-id="a93a7-356">早朝にトレースを取得した場合は、クライアントがプロキシ (または、インターネットに接続されている場合は、インターネットに接続されている) をすばやく受信することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-356">Maybe you've taken a trace in the early morning, and your client can get to the proxy (or whatever egress server exits to the Internet) quickly.</span></span> <span data-ttu-id="a93a7-357">この場合、数字は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-357">In this case, your numbers may look like this:</span></span>
  
![クライアントからプロキシへのラウンドトリップ時間が2.8 ミリ秒であることを示す図。](media/1bd03544-23fc-47d4-bbae-c1feb466a5d8.PNG)
  
<span data-ttu-id="a93a7-359">クライアントコンピューターがプロキシ (または出口) サーバーへのアクセスによる select 数台のうちの1つである場合は、そのコンピューターにリモートで接続することによってテストの次の区間を実行し、そこから Office 365 URL に対して PsPing に対してコマンドプロンプトを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-359">If your client computer is one of the select few with access to the proxy (or egress) server, you can run the next leg of the test by remotely connecting to that computer, running the command prompt to PsPing to an Office 365 URL from there.</span></span> <span data-ttu-id="a93a7-360">そのコンピューターにアクセスできない場合は、ネットワークリソースに連絡して、次の区間に関するヘルプを参照し、正確な番号を入手できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-360">If you don't have access to that computer, you can contact your network resources for help with the next leg and get exact numbers that way.</span></span> <span data-ttu-id="a93a7-361">これができない場合は、問題の Office 365 URL に対して PsPing を取得して、それを PsPing または Ping 時間とプロキシサーバーと比較します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-361">If that's not possible, take a PsPing against the Office 365 URL in question and compare it to the PsPing or Ping time against your proxy server.</span></span> 
  
<span data-ttu-id="a93a7-362">たとえば、クライアントから Office 365 URL に51.84 ミリ秒、クライアントからプロキシ (または出口ポイント) に対して2.8 ミリ秒を使用している場合は、365 Office の出口からの間で49.04 ミリ秒を使用します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-362">For example, if you have 51.84 milliseconds from the client to the Office 365 URL, and you have 2.8 milliseconds from the client to the proxy (or egress point), then you have 49.04 milliseconds from the egress to Office 365.</span></span> <span data-ttu-id="a93a7-363">同様に、1日の高さの間、クライアントからプロキシに12.25 ミリ秒の PsPing があり、クライアントから Office 365 URL への62.01 ミリ秒の場合は、プロキシが Office の 365 URL に出力されるまでの平均値は49.76 ミリ秒です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-363">Likewise, if you have a PsPing of 12.25 milliseconds from the client to the proxy during the height of the day, and 62.01 milliseconds from the client to the Office 365 URL, then your average value for the proxy egress to the Office 365 URL is 49.76 milliseconds.</span></span>
  
![クライアントから Office 365 へのクライアントの横のプロキシへの ping をミリ秒単位で示す追加のグラフィックスを使用して、値を差し引くことができます。](media/cd764e77-5154-44ba-a5cd-443a628eb2d9.PNG)
  
<span data-ttu-id="a93a7-365">トラブルシューティングに関しては、これらのベースラインを保持するだけで興味深い点があるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-365">In terms of troubleshooting, you may find something interesting just from keeping these baselines.</span></span> <span data-ttu-id="a93a7-366">たとえば、一般に、プロキシまたはアウトポイントから Office 365 URL への待機時間が約 40 ~ 59 ミリ秒であることが判明した場合は、また、クライアントのプロキシまたは出口に約 3 ~ 7 ミリ秒の待機時間がある場合は、最後の3つのクライアントが proxy または出口のベースラインで遅延が45ミリ秒を示していると、問題があることがわかります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-366">For example, if you find that you generally have about 40 to 59 milliseconds of latency from the proxy or egress point to the Office 365 URL, and have a client to proxy or egress point latency of about 3 to 7 milliseconds (depending on the amount network traffic you're seeing during that time of day) then you will surely know something is problematic if your last three client to proxy or egress baselines show a latency of 45 milliseconds.</span></span>
  
### <a name="advanced-methods"></a><span data-ttu-id="a93a7-367">高度なメソッド</span><span class="sxs-lookup"><span data-stu-id="a93a7-367">Advanced methods</span></span>

<span data-ttu-id="a93a7-368">Office 365 へのインターネット要求の発生状況を本当に把握したい場合は、ネットワークトレースについて理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-368">If you really want to know what is happening with your Internet requests to Office 365, you need to become familiar with network traces.</span></span> <span data-ttu-id="a93a7-369">これらのトレースにどのツールを使用してもかまいません。 HTTPWatch、Netmon、Message Analyzer、Wireshark、Fiddler、Developer Dashboard ツール、またはその他の方法は、そのツールがネットワークトラフィックをキャプチャしてフィルター処理できる限り同じように実行されます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-369">It does not matter which tools you prefer for these traces, HTTPWatch, Netmon, Message Analyzer, Wireshark, Fiddler, Developer Dashboard tool or any other will do as long as that tool can capture and filter network traffic.</span></span> <span data-ttu-id="a93a7-370">このセクションでは、このようなツールの複数を実行して、問題の完全な図を取得することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a93a7-370">You'll see in this section that it's beneficial to run more than one of these tools to get a more complete picture of the problem.</span></span> <span data-ttu-id="a93a7-371">テストしている場合、これらのツールの一部は、独自の権限でプロキシとしても機能します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-371">When you're testing, some of these tools also act as proxies in their own right.</span></span> <span data-ttu-id="a93a7-372">この記事で使用されているツール ( [Office 365 のパフォーマンストラブルシューティング計画](performance-troubleshooting-plan.md)) には、 [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865)、 [Httpwatch](https://www.httpwatch.com/download/)、または[WireShark](https://www.wireshark.org/)が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-372">Tools used in the companion article, [Performance troubleshooting plan for Office 365](performance-troubleshooting-plan.md), include [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865), [HTTPWatch](https://www.httpwatch.com/download/), or [WireShark](https://www.wireshark.org/).</span></span>
  
<span data-ttu-id="a93a7-373">パフォーマンスベースラインはこの方法の単純な部分であり、多くの手順はパフォーマンスの問題をトラブルシューティングする場合と同じです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-373">Taking a performance baseline is the simple part of this method, and many of the steps are the same as when you troubleshoot a performance issue.</span></span> <span data-ttu-id="a93a7-374">パフォーマンスのベースラインを作成するためのより高度な方法では、ネットワークトレースを取得して保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-374">The more advanced methods of creating baselines for performance requires you to take and store network traces.</span></span> <span data-ttu-id="a93a7-375">この記事の例のほとんどは SharePoint Online を使用していますが、テストと記録に加入する Office 365 サービス全体に共通するアクションの一覧を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-375">Most of the examples in this article use SharePoint Online, but you should develop a list of common actions across the Office 365 services to which you subscribe to test and record.</span></span> <span data-ttu-id="a93a7-376">ベースラインの例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-376">Here is a baseline example:</span></span>
  
- <span data-ttu-id="a93a7-377">SPO のベースラインリスト-\* \* ステップ 1: \* \* SPO web サイトのホームページを参照し、ネットワークトレースを行います。</span><span class="sxs-lookup"><span data-stu-id="a93a7-377">Baseline list for SPO - \*\* Step 1: \*\* Browse the home page of the SPO website and do a network trace.</span></span> <span data-ttu-id="a93a7-378">トレースを保存します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-378">Save the trace.</span></span> 
    
- <span data-ttu-id="a93a7-379">SPO のベースラインリスト-**ステップ 2:** エンタープライズ検索を使用して用語 (会社名など) を検索し、ネットワークトレースを実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-379">Baseline list for SPO - **Step 2:** Search for a term (such as your company name) via Enterprise Search and do a network trace.</span></span> <span data-ttu-id="a93a7-380">トレースを保存します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-380">Save the trace.</span></span> 
    
- <span data-ttu-id="a93a7-381">SPO のベースラインリスト-**手順 3:** SharePoint Online ドキュメントライブラリに大きなファイルをアップロードし、ネットワークトレースを実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-381">Baseline list for SPO - **Step 3:** Upload a large file to a SharePoint Online document library and do a network trace.</span></span> <span data-ttu-id="a93a7-382">トレースを保存します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-382">Save the trace.</span></span> 
    
- <span data-ttu-id="a93a7-383">SPO のベースラインリスト-**手順 4:** OneDrive web サイトのホームページを参照し、ネットワークトレースを実行します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-383">Baseline list for SPO - **Step 4:** Browse the home page of the OneDrive website and do a network trace.</span></span> <span data-ttu-id="a93a7-384">トレースを保存します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-384">Save the trace.</span></span> 
    
<span data-ttu-id="a93a7-385">このリストには、SharePoint Online に対してユーザーが実行する最も重要な共通のアクションが含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-385">This list should include the most important common actions that users take against SharePoint Online.</span></span> <span data-ttu-id="a93a7-386">OneDrive for business への移行を追跡するための最後の手順では、SharePoint Online ホームページ (企業によってカスタマイズされることが多い) と OneDrive for Business ホームページの負荷の比較について説明します。これはあまりカスタマイズされていません。</span><span class="sxs-lookup"><span data-stu-id="a93a7-386">Notice that the last step, to trace going to OneDrive for Business, builds-in a comparison between the load of the SharePoint Online home page (which is often customized by companies) and OneDrive for Business home page, which is seldom customized.</span></span> <span data-ttu-id="a93a7-387">これは、負荷のかかる SharePoint Online サイトに関する非常に基本的なテストです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-387">This is a very basic test when it comes to a slow-loading SharePoint Online site.</span></span> <span data-ttu-id="a93a7-388">テストには、この違いの記録を作成できます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-388">You can build a record of this difference into your testing.</span></span>
  
<span data-ttu-id="a93a7-389">パフォーマンスの問題が発生している場合、多くの手順はベースラインを取る場合と同じです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-389">If you are in the middle of a performance problem, many of the steps are the same as when taking a baseline.</span></span> <span data-ttu-id="a93a7-390">ネットワークトレースは重要になるので、次に重要なトレースを実行する*方法*を取り扱います。</span><span class="sxs-lookup"><span data-stu-id="a93a7-390">Network traces become critical, so we'll handle  *how*  to take the important traces next.</span></span> 
  
<span data-ttu-id="a93a7-391">パフォーマンスの問題に対処するに*は、パフォーマンス*の問題が発生しているときにトレースを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a93a7-391">To tackle a performance problem,  *right now*  , you need to be taking a trace at the time you are experiencing the performance issue.</span></span> <span data-ttu-id="a93a7-392">適切なツールを使用してログを収集する必要があります。また、アクションプランを用意しておく必要があります。これは、可能な限りよい情報を収集するためのトラブルシューティングアクションの一覧です。</span><span class="sxs-lookup"><span data-stu-id="a93a7-392">You need to have the proper tools available to gather logs, and you need an action plan, that is, a list of troubleshooting actions to take to gather the best information that you can.</span></span> <span data-ttu-id="a93a7-393">最初に行う必要があるのは、タイミングを反映したフォルダーにファイルを保存できるように、テストの日付と時刻を記録することです。</span><span class="sxs-lookup"><span data-stu-id="a93a7-393">The first thing to do is record the date and time of the test so that the files can be saved in a folder that reflect the timing.</span></span> <span data-ttu-id="a93a7-394">次に、問題の手順自体に絞り込みます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-394">Next, narrow down to the problem steps themselves.</span></span> <span data-ttu-id="a93a7-395">以下に、テストに使用する正確な手順を示します。</span><span class="sxs-lookup"><span data-stu-id="a93a7-395">These are the exact steps you will use for testing.</span></span> <span data-ttu-id="a93a7-396">次の基本事項を忘れないでください。問題が Outlook にのみある場合は、1つの Office 365 サービスでのみ問題が発生することを記録してください。</span><span class="sxs-lookup"><span data-stu-id="a93a7-396">Don't forget the basics: if the issue is only with Outlook, make sure to record that the problem behavior happens in only one Office 365 service.</span></span> <span data-ttu-id="a93a7-397">この問題の範囲を絞ることで、解決できるものに集中することができます。</span><span class="sxs-lookup"><span data-stu-id="a93a7-397">Narrowing down the scope of this issue will help you to focus on something you can resolve.</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="a93a7-398">関連項目</span><span class="sxs-lookup"><span data-stu-id="a93a7-398">See also</span></span>

[<span data-ttu-id="a93a7-399">Office 365 エンドポイントの管理</span><span class="sxs-lookup"><span data-stu-id="a93a7-399">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

