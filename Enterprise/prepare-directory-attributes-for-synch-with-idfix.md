---
title: IdFix ツールを使用して Office 365 と同期するためにディレクトリ属性を準備する
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
ms.assetid: 497593cf-24c6-491c-940b-7c86dcde9de0
description: IdFix を使用して、準備し、Office 365 に同期する前に、設置ディレクトリをクリーンアップする方法を提供します。
ms.openlocfilehash: a4fc8af476ec8ffdd7d762796abe1ec210a1bacb
ms.sourcegitcommit: 69d60723e611f3c973a6d6779722aa9da77f647f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/27/2018
ms.locfileid: "22541768"
---
# <a name="prepare-directory-attributes-for-synchronization-with-office-365-by-using-the-idfix-tool"></a>IdFix ツールを使用して Office 365 と同期するためにディレクトリ属性を準備する
このトピックには、IdFix ツールの実行に関する詳細な手順が含まれていますいくつかの一般的なエラーを発生する可能性があります修正プログラム、例、および多数のエラーがある場合の対処方法に関するベスト プラクティスを推奨します。
  
## <a name="fixing-errors-in-your-directory-by-using-the-idfix-gui"></a>IdFix GUI を使用したディレクトリ内のエラーの修正
[Office 365 の IdFix ツールを実行](install-and-run-idfix.md)ディレクトリ内の問題を検索し、このトピックで説明したように、GUI 内のエラーを修正します。ツールで空のテーブルが返された場合のエラーが検出されませんでした。多くのディレクトリに問題がある場合、できなくなる可能性が場合、ツールはエラーを返します。1 つの型のすべてのエラーを修正し、に移動次のタイプには、これに対処する方法の 1 つです。 
  
1. 変更を加え始める前に、IdFix によって提示される推奨事項を確認してください。
    
2. IdFix が返すエラーのリストを概観します。エラーの種類がリストされている列の先頭にある **[ERROR]** をクリックすると、エラーの種類ごとにエラーを並び替えることができます。複数のエラーが 1 つの属性に関連付けられている場合、複数のエラーが 1 つの行に結合されます。IdFix は、**[UPDATE]** 列に可能な限り修正の推奨事項を示します。この修正は、オブジェクトに関連付けられているその他の属性のチェックに基づいています。これらは、ディレクトリに既に存在するものよりも通常良いものですが、実際にどちらが適しているかを判断できるのはユーザーだけです。 
    
3. IdFix に重複エラーの修正プログラムに関する提案がある場合は、修正プログラムは、[**更新**] 列の値の先頭の 3 つのフラグのいずれかのなどの`[E]john.doe@contoso.com`。変更を適用すると、提案に同意する場合、フラグはディレクトリには挿入されません。フラグが使用されます、たとえば、提案事項を次の値だけ`john.doe@contoso.com`。候補を受け入れる場合は、[**アクション**] 列から、対応するアクションを選択します。フラグは、次のようにアクションを指定します。 
    
 - **[C]** 提案されているアクションは **[COMPLETE]** です。値を編集する必要はありません。
    
 - **[E]** 提案されているアクションは **[EDIT]** です。値は、ディレクトリ内の別の値との競合を避けるために変更する必要があります。
    
 - **[R]** 提案されているアクションは **[REMOVE]** です。たとえば、この値はメールが有効になっていないオブジェクト上の SMTP プロキシであり、安全に削除できる可能性があります。
    
4. 1 回読み取りし、エラーを理解した、変更を [**更新**] 列のエントリを更新し、**操作**で列 [変更を実装するには IdFix にします。たとえば、2 人のユーザーがいる可能性があります、`proxyAddress`重複として識別されています。1 つだけのユーザーを使用して、`proxyAddress`のメール配信にします。この問題を解決するのには、正しい値を持つユーザーの [**アクション**] 列**の完了**のマークを付けるし、**アクション**] 列で、他のユーザーの**削除**をマークします。これを削除、`proxyAddress`属性ユーザーを対象にこの`proxyAddress`ないはありません変更ユーザーに対象となるとこの`proxyAddress`が正しい。
    
## <a name="common-errors-and-fixes-detected-by-idfix"></a>IdFix によって検出される一般的なエラーおよび修正
次の表は、IdFix によって検出されるエラーと、ツールによって提案される最も一般的な修正を示しています。一部のエラーには、修正方法の例も記載されています。

|**エラー**|**エラーの種類の説明**|**提案される修正**|**使用例**|
|:-----|:-----|:-----|:-----|
|**character** | 無効な文字。値に無効な文字が含まれています。 | **[UPDATE]** 列に示されるエラーに関する提案修正には、無効な文字を削除した値が表示されます。  <br/> | 有効なメール アドレスの最後にある末尾の空白は、不正な文字をなどです。  <br/> " `user@contoso.com` "  <br/> 有効なメール アドレスの先頭には先頭にスペースは、不正な文字をなどです。  <br/> " ` user@contoso.com `"  <br/>  `ú`文字は無効な文字です。 |
|**duplicate** | 重複項目。値は、照会のスコープ内で重複しています。すべての重複値が、エラーとして表示されます。 | 値を編集または削除して、重複を排除します。ツールは、重複に対しては提案修正を示しません。代わりに、ユーザーが複数の重複値のうちどれが正しい値かを選択し、重複項目を削除する必要があります。 ||
|**format** | 形式設定エラー。値が、属性の使用方法に関する形式の要件に違反しています。 | 提案される [UPDATE] には、無効な文字が削除された値が示されます。無効な文字がない場合には、[UPDATE] と [Value] の表示内容は同じです。[UPDATE] の内容を判断は、ユーザーが行う必要があります。ツールは、すべての形式設定エラーに関して提案修正を示すわけではありません。 | たとえば SMTP アドレスは RFC 2822 で従う必要があり、mailNickName が開始またはピリオドで終わることはできません。ディレクトリ属性のフォーマットの要件の詳細については、 [Office 365 のディレクトリ同期を使用してプロビジョニング ユーザーへの準備](prepare-for-directory-synchronization.md)」の「ディレクトリ オブジェクトと属性の準備」を参照してください。 |
|topleveldomain  <br/> |トップ レベルのドメインです。これは、 [RFC 2822](https://go.microsoft.com/fwlink/p/?LinkId=401464)の書式設定の対象となる値に適用されます。トップ レベルのドメインがインターネットにルーティング可能でない場合、これとして識別するエラー。たとえば .local の SMTP アドレスはインターネットにルーティング可能ではありませんはエラーの原因とこの。 |値を次のように、インターネットのルーティング可能なドメインに変更`.com`または`.net`。 | 変更`myaddress@fourthcoffee.local`を`fourthcoffee.com`または他のインターネットのルーティング可能なドメインです。  <br/> 手順については、[ディレクトリ同期の .local ドメイン) などのルーティング不可能なドメインを準備する方法](prepare-a-non-routable-domain-for-directory-synchronization.md)を参照してください。 |
|**domainpart** | ドメイン部エラー。これは、RFC 2822 形式設定の対象となる値に当てはまります。値のドメイン部が無効で RFC 2822 に準拠していない場合に、このエラーが生成されます。 | RFC 2822 に準拠するには、値を変更します。たとえば、スペースや無効な文字が含まれていないことを確認します。 | 変更`myaddress@fourth coffee.com`を`myaddress@fourthcoffee.com`。 |
|**domainpart_localpart** | ローカル部エラー。これは、RFC 2822 形式設定の対象となる値に当てはまります。値のローカル部が無効で RFC 2822 に準拠していない場合に、このエラーが生成されます。 |RFC 2822 に準拠するには、値を変更します。たとえば、スペースや無効な文字が含まれていないことを確認します。 |変更`my"work"address@fourthcoffee.com`を`myworkaddress@fourthcoffee.com`。 |
|**length** | 長さエラー。値が、属性の長さの制限に違反します。これは通常、ディレクトリ スキーマが変更されたときに生じます。  | IdFix によって提案される更新内容では、許容される長さに値が切り捨てられます。  <br/> これにより、望ましくない結果が生じる場合もあることに注意してください。提案修正を確認し、**[Apply]** をクリックする前に必要な変更を加えてください。 ||
|**blank**  | 空白または null エラー。値が、属性を同期するための null 制限に違反します。いくつかの属性には値が含まれている必要があります。 | 可能な場合、提案される更新内容では、他の属性値を用いて同様の代替値が生成されます。 ||
|**mailmatch** | これにのみ適用されます Office 365 専用です。値では、mail 属性が一致しません。 | 推奨される更新プログラム、メール属性の値であるが付きます"SMTP:"です。 ||
    
## <a name="operations-you-can-perform-by-using-idfix"></a>IdFix を使用して実行できる操作
エラーを修正するのには、**アクション**」ドロップ ダウン リストからオプションを選択します。次の表では、IdFix ツールを使用して、属性に対して実行できる**アクション**の操作について説明します。[**アクション**] 列を空白のままにすると、IdFix ツールはその特定のエラー、ディレクトリ内の任意の操作になりません。 

|**アクション**|**アクションの説明**|**使用例**|
|:-----|:-----|:-----|
|**COMPLETE** | 元の値は受け入れ可能であり、エラーとして識別されていても変更しません。 | 2 人のユーザーの proxyAddress が重複していると識別されました。1 人だけがメール配信用にその値を使用できます。適切な値を持つユーザーには **[COMPLETE]** のマークを付けます。 |
|**削除** | 属性の値は、ソース オブジェクトから削除されます。たとえば、複数値属性の場合は`proxyAddresses`、表示される個々 の値のみが削除されます。 | 2 人のユーザーの proxyAddress が重複していると識別されました。1 人だけがメール配信用にその値を使用できます。重複値を持つユーザーに **[REMOVE]** のマークを付けます。 |
|**編集** | [**更新**] 列内の情報は、属性の値を変更するのには使用されます。**更新**の有効な値は、IdFix で提案されてきた場合、[**アクション**] 列から**編集**を選択し、次のエラーへ移動します。提案しない場合は、[**更新**] 列に新しい名前を入力し、[**アクション**] 列から選択して**編集**します。 ||
|**元に戻す** | このオプションは、トランザクション ログから復元した場合にのみ使用可能です。**[UNDO]** を選択した場合、属性値は元の値に復元されます。 ||
|**FAIL** | **値**に AD DS の規則での不明な競合がある場合にのみこの値が返されます。この例では、編集 [**更新**] 列の値もう一度このエラーは、どのようなことがわかっている場合。ADSI Edit を使用してオブジェクト内の値を分析する必要がある場合があります。詳細については、 [ADSI Edit の (ファイル名を指定)](https://go.microsoft.com/fwlink/p/?LinkId=401170)を参照してください。 ||

特定のエラーまたは一連のエラーに関して **[ACTION]** を選択した後、**[Apply]** をクリックします。**[Apply]** をクリックすると、ツールによってディレクトリに変更が加えられます。**[Apply]** をクリックする前に複数のエラーを修正すると、IdFix によって同時にすべてが変更されます。

加えた修正していない新しいエラーが発生することを確認するには、再度 IdFix を実行します。手順を実行する必要がある回数だけを繰り返すことができます。同期する前に、何度かを処理を完了することをお勧めします。
    
## <a name="changing-the-rule-set-used-by-idfix"></a>IdFix で使用するルール セットの変更
既定では、IdFix は、設定、ディレクトリ内のエントリをテストするのにはマルチ テナント型のルールを使用します。これは、右の規則セットは、ほとんどの Office 365 のお客様を = します。ただし、専用の Office 365 または顧客の ITAR (武器規制の国際トラフィック) 場合は、設定の代わりに専用の規則を使用して IdFix を設定できます。顧客の種類がわからない場合、安全にこの手順を省略できます。専用] に設定するルールを設定するのにはメニュー バーの歯車アイコンをクリックし、**専用**です。
  
## <a name="changing-the-scope-of-the-search-used-by-idfix"></a>IdFix で使用する検索スコープの変更
既定では、IdFix は、ディレクトリ全体を検索します。必要な場合には、代わりに、ツールが特定のサブツリーを検索するように構成できます。そのためには、メニュー バーで、[Filter] アイコンをクリックし、有効なサブツリーを入力してください。
  
## <a name="rolling-back-your-changes-by-using-the-idfix-gui"></a>IdFix GUI による変更内容のロールバック
変更を適用するのには [**適用**] をクリックするたびに、IdFix ツールは、変更内容だけを一覧表示するトランザクション ・ ログと呼ばれる別のファイルを作成します。最新のログでは、誤りがあった場合には、これらの変更をロールバックするのにトランザクション ・ ログを使用できます。行う場合、間違いを更新するとき**を元に戻す**] をクリックして最後に適用した変更を元に戻すことができます。**元に戻す**] をクリックすると、IdFix は、最新のトランザクション ログには、それらの変更だけをロールバックするのにトランザクション ・ ログを使用します。トランザクション ・ ログの使用の詳細については、次を参照してください。[参照: トランザクション ログの Office 365 の IdFix](idfix-transaction-log.md)。